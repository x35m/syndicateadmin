(()=>{var e={};e.id=9842,e.ids=[9842],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5900:e=>{"use strict";e.exports=require("pg")},9261:e=>{"use strict";e.exports=require("postcss")},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},4521:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),t(5729),t(596),t(7489),t(5866);var a=t(3191),r=t(8716),i=t(7922),n=t.n(i),l=t(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["admin",{children:["rss",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5729)),"/Users/macbookpro/Desktop/syndicateadmin/app/admin/rss/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,596)),"/Users/macbookpro/Desktop/syndicateadmin/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,7489)),"/Users/macbookpro/Desktop/syndicateadmin/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/macbookpro/Desktop/syndicateadmin/app/admin/rss/page.tsx"],m="/admin/rss/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/rss/page",pathname:"/admin/rss",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5436:(e,s,t)=>{Promise.resolve().then(t.bind(t,5414))},8287:(e,s,t)=>{Promise.resolve().then(t.bind(t,2346))},6421:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},5303:()=>{},5414:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>A});var a=t(326),r=t(7577),i=t(3796),n=t(2332),l=t(4459),c=t(6840),d=t(6562),o=t(3495),m=t(799),x=t(380);let u=(0,t(7926).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);var h=t(9492),p=t(5874),f=t(3183),g=t(772),j=t(4432),v=t(2643),N=t(5304),b=t(5940),y=t(2288),w=t(1677),k=t(1048),S=t(3313),C=t(567),z=t(5999);function P({lastSync:e}){let[s,t]=(0,r.useState)([]),[i,P]=(0,r.useState)(!0),[A,R]=(0,r.useState)(!1),[Z,T]=(0,r.useState)(""),[$,q]=(0,r.useState)(!1),[D,_]=(0,r.useState)(null),[E,O]=(0,r.useState)(null),[M,F]=(0,r.useState)(null),[U,L]=(0,r.useState)(""),[H,Y]=(0,r.useState)(new Set),[B,G]=(0,r.useState)(null),[J,I]=(0,r.useState)(!1),[K,V]=(0,r.useState)(1),[X,W]=(0,r.useState)(25),Q=async()=>{try{P(!0);let e=await fetch("/api/local-feeds"),s=await e.json();if(s.success){let e=(s.data??[]).map(e=>({...e,id:String(e.id),status:e.status??"active",lastFetched:e.lastFetched??e.last_fetched??null}));t(e)}}catch(e){console.error("Error fetching feeds:",e)}finally{P(!1)}},ee=async()=>{if(!Z.trim()){z.Am.warning("Пожалуйста, введите URL фида");return}q(!0);try{console.log("\uD83D\uDD04 Adding local RSS feed:",Z);let e=await fetch("/api/local-feeds",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedUrl:Z})}),s=await e.json();if(console.log("\uD83D\uDCCA Add feed result:",s),s.success){let e=s.data.stats;z.Am.success(`Фид успешно добавлен! Загружено: ${e.fetched}, Новых: ${e.new}, Обновлено: ${e.updated}`),T(""),R(!1),await Q()}else{let e=s.error||"Неизвестная ошибка";console.error("❌ Add feed failed:",e),z.Am.error(`Ошибка: ${e}`)}}catch(e){console.error("Error adding feed:",e),z.Am.error("Ошибка при добавлении фида")}finally{q(!1)}},es=e=>{if(0===H.size){z.Am.warning("Выберите фиды для обработки");return}G(e)},et=async()=>{if(!B)return;let e=Array.from(H);I(!0);try{if("update"===B){for(let s of e)await ea(s,!0);z.Am.success(`Успешно обновлено ${e.length} фид(ов)`)}else if("delete"===B){for(let s of e)await fetch(`/api/local-feeds?id=${s}`,{method:"DELETE"});z.Am.success(`Успешно удалено ${e.length} фид(ов)`),await Q()}Y(new Set)}catch(e){console.error("Error performing bulk action:",e),z.Am.error("Ошибка при выполнении действия")}finally{I(!1),G(null)}},ea=async(e,s=!1)=>{_(e);try{let t=await fetch("/api/local-feeds/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedId:e})}),a=await t.json();if(a.success){let{fetched:e,new:t,updated:r}=a.data;s||z.Am.success(`Импорт завершен! Загружено: ${e}, Новых: ${t}, Обновлено: ${r}`),await Q()}else s||z.Am.error(`Ошибка: ${a.error}`)}catch(e){console.error("Error importing feed:",e),s||z.Am.error("Ошибка при импорте материалов")}finally{_(null)}},er=async e=>{let s="active"===e.status?"inactive":"active";O(e.id);try{let a=await fetch("/api/local-feeds",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,status:s})}),r=await a.json();if(!r.success)throw Error(r.error||"Не удалось обновить статус фида");t(t=>t.map(t=>t.id===e.id?{...t,status:s}:t)),z.Am.success("active"===s?"Фид активирован и будет участвовать в автоматическом импорте":"Фид деактивирован и не будет участвовать в автоматическом импорте")}catch(e){console.error("Error toggling feed status:",e),z.Am.error("Не удалось обновить статус фида")}finally{O(null)}},ei=e=>{F(e.id),L(e.title||e.name||e.feedName||"")},en=()=>{F(null),L("")},el=async e=>{if(!U.trim()){z.Am.warning("Название не может быть пустым");return}try{let s=await fetch("/api/local-feeds",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,title:U.trim()})}),t=await s.json();t.success?(z.Am.success("Название обновлено"),await Q(),F(null),L("")):z.Am.error(`Ошибка: ${t.error}`)}catch(e){console.error("Error updating feed title:",e),z.Am.error("Ошибка при обновлении названия")}},ec=Math.ceil(s.length/X),ed=(K-1)*X,eo=ed+X,em=s.slice(ed,eo),ex=e=>{V(Math.max(1,Math.min(e,ec)))},eu=e=>{W(e),V(1)},eh=e=>{let s=new Set(H);s.has(e)?s.delete(e):s.add(e),Y(s)},ep=(()=>{let e=H.size;switch(B){case"update":return{title:"Обновить фиды",description:`Вы уверены, что хотите обновить ${e} фид(ов)? Это может занять некоторое время.`,actionText:"Обновить",variant:"default"};case"delete":return{title:"Удалить фиды",description:`Вы уверены, что хотите удалить ${e} фид(ов)? Материалы из этих фидов останутся в базе.`,actionText:"Удалить",variant:"destructive"};default:return null}})();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(v.Zb,{children:[a.jsx(v.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx(v.ll,{children:"Управление RSS фидами"}),(0,a.jsxs)(v.SZ,{className:"mt-1",children:["Последняя синхронизация: ",(e=>{if(!e)return"Никогда";let s=new Date(e),t=String(s.getDate()).padStart(2,"0"),a=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getFullYear()).slice(-2),i=String(s.getHours()).padStart(2,"0"),n=String(s.getMinutes()).padStart(2,"0");return`${t}.${a}.${r} ${i}:${n}`})(e)]})]}),(0,a.jsxs)(g.z,{size:"sm",onClick:()=>R(!0),children:[a.jsx(n.Z,{className:"mr-2 h-4 w-4"}),"Добавить фид"]})]})}),(0,a.jsxs)(v.aY,{children:[!i&&s.length>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-4 border-b",children:[a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Показано ",ed+1,"-",Math.min(eo,s.length)," из ",s.length]})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"На странице:"}),a.jsx("div",{className:"flex gap-1",children:[25,50,100,200].map(e=>a.jsx(g.z,{variant:X===e?"default":"outline",size:"sm",onClick:()=>eu(e),className:"h-8 w-12",children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(g.z,{variant:"outline",size:"sm",onClick:()=>ex(1),disabled:1===K,className:"h-8 w-8 p-0",title:"Первая страница",children:a.jsx(l.Z,{className:"h-4 w-4"})}),a.jsx(g.z,{variant:"outline",size:"sm",onClick:()=>ex(K-1),disabled:1===K,className:"h-8 w-8 p-0",title:"Предыдущая страница",children:a.jsx(c.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2",children:[a.jsx("span",{className:"text-sm font-medium",children:K}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"из"}),a.jsx("span",{className:"text-sm font-medium",children:ec})]}),a.jsx(g.z,{variant:"outline",size:"sm",onClick:()=>ex(K+1),disabled:K===ec,className:"h-8 w-8 p-0",title:"Следующая страница",children:a.jsx(d.Z,{className:"h-4 w-4"})}),a.jsx(g.z,{variant:"outline",size:"sm",onClick:()=>ex(ec),disabled:K===ec,className:"h-8 w-8 p-0",title:"Последняя страница",children:a.jsx(o.Z,{className:"h-4 w-4"})})]})]})]}),i?a.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(N.O,{className:"h-12 w-12"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[a.jsx(N.O,{className:"h-4 w-full"}),a.jsx(N.O,{className:"h-3 w-3/4"})]}),a.jsx(N.O,{className:"h-8 w-24"})]},s))}):0===s.length?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Фиды не найдены. Добавьте первый фид!"}):(0,a.jsxs)(b.iA,{children:[a.jsx(b.xD,{children:(0,a.jsxs)(b.SC,{children:[a.jsx(b.ss,{className:"w-12",children:a.jsx(S.X,{checked:em.length>0&&em.every(e=>H.has(e.id)),onCheckedChange:()=>{if(H.size===em.length&&em.length>0){let e=new Set(H);em.forEach(s=>e.delete(s.id)),Y(e)}else{let e=new Set(H);em.forEach(s=>e.add(s.id)),Y(e)}}})}),a.jsx(b.ss,{children:"Название источника"}),a.jsx(b.ss,{children:"URL"}),a.jsx(b.ss,{className:"w-40 text-center",children:"Статус"}),a.jsx(b.ss,{className:"w-[120px]",children:"Действия"})]})}),a.jsx(b.RM,{children:em.map(e=>(0,a.jsxs)(b.SC,{children:[a.jsx(b.pj,{onClick:e=>e.stopPropagation(),children:a.jsx(S.X,{checked:H.has(e.id),onCheckedChange:()=>eh(e.id)})}),a.jsx(b.pj,{children:M===e.id?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(j.I,{value:U,onChange:e=>L(e.target.value),onKeyDown:s=>{"Enter"===s.key?el(e.id):"Escape"===s.key&&en()},className:"h-8",autoFocus:!0}),a.jsx(g.z,{variant:"ghost",size:"sm",onClick:()=>el(e.id),children:a.jsx(m.Z,{className:"h-4 w-4 text-green-600"})}),a.jsx(g.z,{variant:"ghost",size:"sm",onClick:en,children:a.jsx(x.Z,{className:"h-4 w-4 text-red-600"})})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:e.title||e.name||e.feedName||"Без названия"}),a.jsx(g.z,{variant:"ghost",size:"sm",onClick:()=>ei(e),className:"h-6 w-6 p-0",title:"Редактировать название",children:a.jsx(u,{className:"h-3 w-3"})})]})}),a.jsx(b.pj,{children:a.jsx("div",{className:"truncate max-w-md text-muted-foreground text-sm",children:e.url||e.feedUrl||"URL не указан"})}),a.jsx(b.pj,{children:(0,a.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[a.jsx(C.C,{variant:"active"===e.status?"default":"secondary",children:"active"===e.status?"Активен":"Отключен"}),a.jsx(g.z,{variant:"ghost",size:"sm",onClick:()=>er(e),disabled:E===e.id,className:"px-0 text-xs",children:E===e.id?(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[a.jsx(h.Z,{className:"h-3 w-3 animate-spin"}),"Обновление..."]}):"active"===e.status?"Деактивировать":"Активировать"})]})}),a.jsx(b.pj,{children:(0,a.jsxs)("div",{className:"flex gap-1",children:[a.jsx(g.z,{variant:"outline",size:"sm",onClick:()=>ea(e.id),disabled:D===e.id,title:"Обновить фид",children:a.jsx(p.Z,{className:`h-4 w-4 ${D===e.id?"animate-spin":""}`})}),a.jsx(g.z,{variant:"outline",size:"sm",onClick:()=>{Y(new Set([e.id])),G("delete")},title:"Удалить фид",children:a.jsx(f.Z,{className:"h-4 w-4"})})]})})]},e.id))})]}),!i&&s.length>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Показано ",ed+1,"-",Math.min(eo,s.length)," из ",s.length]})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"На странице:"}),a.jsx("div",{className:"flex gap-1",children:[25,50,100,200].map(e=>a.jsx(g.z,{variant:X===e?"default":"outline",size:"sm",onClick:()=>eu(e),className:"h-8 w-12",children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(g.z,{variant:"outline",size:"sm",onClick:()=>ex(1),disabled:1===K,className:"h-8 w-8 p-0",title:"Первая страница",children:a.jsx(l.Z,{className:"h-4 w-4"})}),a.jsx(g.z,{variant:"outline",size:"sm",onClick:()=>ex(K-1),disabled:1===K,className:"h-8 w-8 p-0",title:"Предыдущая страница",children:a.jsx(c.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2",children:[a.jsx("span",{className:"text-sm font-medium",children:K}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"из"}),a.jsx("span",{className:"text-sm font-medium",children:ec})]}),a.jsx(g.z,{variant:"outline",size:"sm",onClick:()=>ex(K+1),disabled:K===ec,className:"h-8 w-8 p-0",title:"Следующая страница",children:a.jsx(d.Z,{className:"h-4 w-4"})}),a.jsx(g.z,{variant:"outline",size:"sm",onClick:()=>ex(ec),disabled:K===ec,className:"h-8 w-8 p-0",title:"Последняя страница",children:a.jsx(o.Z,{className:"h-4 w-4"})})]})]})]})]})]}),H.size>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 animate-in slide-in-from-bottom-4 fade-in duration-300",children:a.jsx(v.Zb,{className:"border-primary shadow-2xl",children:a.jsx(v.aY,{className:"py-4 px-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm font-medium",children:["Выбрано: ",a.jsx("span",{className:"text-primary font-bold",children:H.size})," фид(ов)"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(g.z,{size:"sm",variant:"default",onClick:()=>es("update"),children:[a.jsx(p.Z,{className:"mr-2 h-4 w-4"}),"Обновить"]}),(0,a.jsxs)(g.z,{size:"sm",variant:"destructive",onClick:()=>es("delete"),children:[a.jsx(f.Z,{className:"mr-2 h-4 w-4"}),"Удалить"]})]}),a.jsx(g.z,{size:"sm",variant:"ghost",onClick:()=>Y(new Set),children:"Отменить"})]})})})}),a.jsx(y.Vq,{open:A,onOpenChange:R,children:(0,a.jsxs)(y.cZ,{children:[(0,a.jsxs)(y.fK,{children:[a.jsx(y.$N,{children:"Добавить новый RSS фид"}),a.jsx(y.Be,{children:"Введите URL RSS фида. После добавления материалы будут автоматически импортированы."})]}),a.jsx("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(k._,{htmlFor:"feed-url",children:"URL фида"}),a.jsx(j.I,{id:"feed-url",placeholder:"https://example.com/feed.xml",value:Z,onChange:e=>T(e.target.value),onKeyDown:e=>{"Enter"!==e.key||$||ee()}})]})}),(0,a.jsxs)(y.cN,{children:[a.jsx(g.z,{variant:"outline",onClick:()=>{R(!1),T("")},disabled:$,children:"Отмена"}),a.jsx(g.z,{onClick:ee,disabled:$,children:$?(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Добавление..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.Z,{className:"mr-2 h-4 w-4"}),"Добавить"]})})]})]})}),a.jsx(w.aR,{open:null!==B,onOpenChange:e=>!e&&G(null),children:(0,a.jsxs)(w._T,{children:[(0,a.jsxs)(w.fY,{children:[a.jsx(w.f$,{children:ep?.title}),a.jsx(w.yT,{children:ep?.description})]}),(0,a.jsxs)(w.xo,{children:[a.jsx(w.le,{children:"Отмена"}),a.jsx(w.OL,{onClick:et,disabled:J,className:`${ep?.variant==="destructive"?"bg-destructive text-destructive-foreground hover:bg-destructive/90":""} flex items-center`,children:J?(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"delete"===B?"Удаление...":"Выполнение..."]}):ep?.actionText})]})]})})]})}function A(){let[e,s]=(0,r.useState)({lastFetch:null}),[t,n]=(0,r.useState)(!1),l=async()=>{try{let e=await fetch("/api/stats"),t=await e.json();t.success&&s({lastFetch:t.data?.lastFetch??null})}catch(e){console.error("Error fetching stats:",e)}},c=async()=>{n(!0);try{let e=await fetch("/api/sync",{method:"POST"}),s=await e.json();if(s.success){let e=s.data;z.Am.success(`Синхронизация завершена.
Загружено: ${e.fetched}, Новых: ${e.new}, Обновлено: ${e.updated}`),await l()}else z.Am.error(s.error||"Не удалось выполнить синхронизацию")}catch(e){console.error("Error syncing feeds:",e),z.Am.error("Ошибка при синхронизации")}finally{n(!1)}};return(0,a.jsxs)(a.Fragment,{children:[a.jsx(i.P,{}),a.jsx("div",{className:"min-h-screen bg-background p-8",children:(0,a.jsxs)("div",{className:"container space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Управление RSS фидами"}),a.jsx("p",{className:"text-muted-foreground mt-2 max-w-2xl",children:"Добавляйте и обновляйте RSS источники. После добавления материалы подтягиваются автоматически, также можно инициировать принудительный импорт."})]}),(0,a.jsxs)(v.Zb,{className:"w-full max-w-sm",children:[a.jsx(v.Ol,{className:"py-3",children:a.jsx(v.ll,{className:"text-sm font-medium",children:"Синхронизация"})}),(0,a.jsxs)(v.aY,{className:"flex flex-col gap-3 py-3",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Последняя синхронизация: ",e.lastFetch?new Date(e.lastFetch).toLocaleString("ru-RU"):"Никогда"]}),(0,a.jsxs)(g.z,{variant:"outline",size:"sm",onClick:c,disabled:t,className:"justify-start",children:[a.jsx(p.Z,{className:`mr-2 h-4 w-4 ${t?"animate-spin":""}`}),t?"Синхронизация...":"Синхронизировать все фиды"]})]})]})]}),a.jsx(P,{lastSync:e.lastFetch})]})})]})}},3796:(e,s,t)=>{"use strict";t.d(s,{P:()=>o});var a=t(326),r=t(434),i=t(5047),n=t(7863),l=t(772),c=t(6125),d=t(5999);function o(){let e=(0,i.usePathname)(),s=(0,i.useRouter)(),t=async()=>{try{(await fetch("/api/admin/logout",{method:"POST"})).ok&&(d.Am.success("Вы вышли из системы"),s.push("/admin/login"),s.refresh())}catch(e){console.error("Logout error:",e),d.Am.error("Ошибка при выходе")}};return a.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsxs)("div",{className:"container flex h-16 items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-6 md:gap-10",children:[a.jsx(r.default,{href:"/admin",className:"flex items-center space-x-2",children:(0,a.jsxs)("span",{className:"text-xl font-bold tracking-tight",children:["SYNDICATE ",a.jsx("span",{className:"text-primary",children:"admin"})]})}),a.jsx("nav",{className:"flex items-center gap-6",children:[{href:"/admin",label:"Дашборд"},{href:"/admin/materials",label:"Материалы"},{href:"/admin/rss",label:"RSS фиды"},{href:"/admin/automation",label:"Автоматизация"},{href:"/admin/taxonomy",label:"Справочники"},{href:"/admin/logs",label:"Логи"},{href:"/admin/settings",label:"Настройки"}].map(s=>a.jsx(r.default,{href:s.href,className:(0,n.cn)("text-sm font-medium transition-colors hover:text-primary",e===s.href?"text-foreground":"text-muted-foreground"),children:s.label},s.href))})]}),(0,a.jsxs)(l.z,{variant:"ghost",size:"sm",onClick:t,children:[a.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Выход"]})]})})}},567:(e,s,t)=>{"use strict";t.d(s,{C:()=>l});var a=t(326);t(7577);var r=t(9360),i=t(7863);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return a.jsx("div",{className:(0,i.cn)(n({variant:s}),e),...t})}},772:(e,s,t)=>{"use strict";t.d(s,{d:()=>c,z:()=>d});var a=t(326),r=t(7577),i=t(4214),n=t(9360),l=t(7863);let c=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:s,size:t,asChild:r=!1,...n},d)=>{let o=r?i.g7:"button";return a.jsx(o,{className:(0,l.cn)(c({variant:s,size:t,className:e})),ref:d,...n})});d.displayName="Button"},2643:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>l,SZ:()=>d,Zb:()=>n,aY:()=>o,ll:()=>c});var a=t(326),r=t(7577),i=t(7863);let n=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));n.displayName="Card";let l=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let c=r.forwardRef(({className:e,...s},t)=>a.jsx("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let d=r.forwardRef(({className:e,...s},t)=>a.jsx("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let o=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent",r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},5304:(e,s,t)=>{"use strict";t.d(s,{O:()=>i});var a=t(326),r=t(7863);function i({className:e,...s}){return a.jsx("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",e),...s})}},2346:(e,s,t)=>{"use strict";t.d(s,{Toaster:()=>i});var a=t(326),r=t(5999);let i=({...e})=>a.jsx(r.x7,{theme:"system",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},5940:(e,s,t)=>{"use strict";t.d(s,{RM:()=>c,SC:()=>d,iA:()=>n,pj:()=>m,ss:()=>o,xD:()=>l});var a=t(326),r=t(7577),i=t(7863);let n=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",e),...s})}));n.displayName="Table";let l=r.forwardRef(({className:e,...s},t)=>a.jsx("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",e),...s}));l.displayName="TableHeader";let c=r.forwardRef(({className:e,...s},t)=>a.jsx("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...s}));c.displayName="TableBody",r.forwardRef(({className:e,...s},t)=>a.jsx("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let d=r.forwardRef(({className:e,...s},t)=>a.jsx("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));d.displayName="TableRow";let o=r.forwardRef(({className:e,...s},t)=>a.jsx("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));o.displayName="TableHead";let m=r.forwardRef(({className:e,...s},t)=>a.jsx("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));m.displayName="TableCell",r.forwardRef(({className:e,...s},t)=>a.jsx("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption"},7863:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var a=t(1135),r=t(1009);function i(...e){return(0,r.m6)((0,a.W)(e))}},596:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i,metadata:()=>r});var a=t(9510);let r={title:"Syndicate Admin - Панель управления",description:"Административная панель для управления RSS-фидами, материалами и настройками сервиса Syndicate."};function i({children:e}){return a.jsx(a.Fragment,{children:e})}},5729:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var a=t(8570);let r=(0,a.createProxy)(String.raw`/Users/macbookpro/Desktop/syndicateadmin/app/admin/rss/page.tsx`),{__esModule:i,$$typeof:n}=r;r.default;let l=(0,a.createProxy)(String.raw`/Users/macbookpro/Desktop/syndicateadmin/app/admin/rss/page.tsx#default`)},7489:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x,metadata:()=>m});var a=t(9510),r=t(5384),i=t.n(r);t(7272);var n=t(8570);let l=(0,n.createProxy)(String.raw`/Users/macbookpro/Desktop/syndicateadmin/components/ui/sonner.tsx`),{__esModule:c,$$typeof:d}=l;l.default;let o=(0,n.createProxy)(String.raw`/Users/macbookpro/Desktop/syndicateadmin/components/ui/sonner.tsx#Toaster`),m={title:"Syndicate - Материалы из различных источников",description:"Коллекция публикаций и материалов из различных RSS-источников. Удобный просмотр и фильтрация контента."};function x({children:e}){return a.jsx("html",{lang:"en",children:(0,a.jsxs)("body",{className:i().className,children:[e,a.jsx(o,{position:"top-right"})]})})}Promise.all([t.e(2027),t.e(3258),t.e(7435),t.e(424)]).then(t.bind(t,7328)).then(({initCronJob:e,runInitialFetch:s})=>{e(),s()}),Promise.all([t.e(2027),t.e(3258),t.e(7435),t.e(424),t.e(4484)]).then(t.bind(t,4484)).then(({initAutomationScheduler:e})=>{e()})},7272:()=>{},2332:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(7926).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5874:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(7926).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,2283,896,434,4915,4025,7392,3464],()=>t(4521));module.exports=a})();