"use strict";exports.id=327,exports.ids=[327],exports.modules={5392:(e,t,u)=>{var r,s,n,i,a,o,l,D,c,h,d,f,p,F,A,C,g,m,E,y,b,w,B,_,v,k,S,x,R,P,M,$,N,O,I,T,j,L,q,W,U,J,X,H,V,K,z,G,Q,Z,Y,ee,et,eu,er,es,en,ei,ea,eo,el,eD,ec;let eh,ed,ef;function ep(e,t,u,r,s){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,u):s?s.value=u:t.set(e,u),u}function eF(e,t,u,r){if("a"===u&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===u?r:"a"===u?r.call(e):r?r.value:t.get(e)}u.d(t,{ZP:()=>t7});let eA=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return eA=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),u=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^u()&15>>+e/4).toString(16))};function eC(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}let eg=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){let t=Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return Error(JSON.stringify(e))}catch{}}return Error(e)};class em extends Error{}class eE extends em{constructor(e,t,u,r){super(`${eE.makeMessage(e,t,u)}`),this.status=e,this.headers=r,this.requestID=r?.get("request-id"),this.error=t}static makeMessage(e,t,u){let r=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):u;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,u,r){return e&&r?400===e?new eB(e,t,u,r):401===e?new e_(e,t,u,r):403===e?new ev(e,t,u,r):404===e?new ek(e,t,u,r):409===e?new eS(e,t,u,r):422===e?new ex(e,t,u,r):429===e?new eR(e,t,u,r):e>=500?new eP(e,t,u,r):new eE(e,t,u,r):new eb({message:u,cause:eg(t)})}}class ey extends eE{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class eb extends eE{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class ew extends eb{constructor({message:e}={}){super({message:e??"Request timed out."})}}class eB extends eE{}class e_ extends eE{}class ev extends eE{}class ek extends eE{}class eS extends eE{}class ex extends eE{}class eR extends eE{}class eP extends eE{}let eM=/^[a-z][a-z0-9+.-]*:/i,e$=e=>eM.test(e),eN=e=>(eN=Array.isArray)(e),eO=eN;function eI(e){return"object"!=typeof e?{}:e??{}}let eT=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new em(`${e} must be an integer`);if(t<0)throw new em(`${e} must be a positive integer`);return t},ej=e=>{try{return JSON.parse(e)}catch(e){return}},eL=e=>new Promise(t=>setTimeout(t,e)),eq="0.68.0",eW=()=>"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator,eU=()=>{let e="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eq,"X-Stainless-OS":eX(Deno.build.os),"X-Stainless-Arch":eJ(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eq,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eq,"X-Stainless-OS":eX(globalThis.process.platform??"unknown"),"X-Stainless-Arch":eJ(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let t=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let u=t.exec(navigator.userAgent);if(u){let t=u[1]||0,r=u[2]||0,s=u[3]||0;return{browser:e,version:`${t}.${r}.${s}`}}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eq,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eq,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},eJ=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",eX=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown",eH=()=>eh??(eh=eU());function eV(...e){let t=globalThis.ReadableStream;if(void 0===t)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function eK(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return eV({start(){},async pull(e){let{done:u,value:r}=await t.next();u?e.close():e.enqueue(r)},async cancel(){await t.return?.()}})}function ez(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function eG(e){if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator]){await e[Symbol.asyncIterator]().return?.();return}let t=e.getReader(),u=t.cancel();t.releaseLock(),await u}let eQ=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});function eZ(e){let t;return(ed??(ed=(t=new globalThis.TextEncoder).encode.bind(t)))(e)}function eY(e){let t;return(ef??(ef=(t=new globalThis.TextDecoder).decode.bind(t)))(e)}class e0{constructor(){r.set(this,void 0),s.set(this,void 0),ep(this,r,new Uint8Array,"f"),ep(this,s,null,"f")}decode(e){let t;if(null==e)return[];let u=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?eZ(e):e;ep(this,r,function(e){let t=0;for(let u of e)t+=u.length;let u=new Uint8Array(t),r=0;for(let t of e)u.set(t,r),r+=t.length;return u}([eF(this,r,"f"),u]),"f");let n=[];for(;null!=(t=function(e,t){for(let u=t??0;u<e.length;u++){if(10===e[u])return{preceding:u,index:u+1,carriage:!1};if(13===e[u])return{preceding:u,index:u+1,carriage:!0}}return null}(eF(this,r,"f"),eF(this,s,"f")));){if(t.carriage&&null==eF(this,s,"f")){ep(this,s,t.index,"f");continue}if(null!=eF(this,s,"f")&&(t.index!==eF(this,s,"f")+1||t.carriage)){n.push(eY(eF(this,r,"f").subarray(0,eF(this,s,"f")-1))),ep(this,r,eF(this,r,"f").subarray(eF(this,s,"f")),"f"),ep(this,s,null,"f");continue}let e=null!==eF(this,s,"f")?t.preceding-1:t.preceding,u=eY(eF(this,r,"f").subarray(0,e));n.push(u),ep(this,r,eF(this,r,"f").subarray(t.index),"f"),ep(this,s,null,"f")}return n}flush(){return eF(this,r,"f").length?this.decode("\n"):[]}}r=new WeakMap,s=new WeakMap,e0.NEWLINE_CHARS=new Set(["\n","\r"]),e0.NEWLINE_REGEXP=/\r\n|[\n\r]/g;let e1={off:0,error:200,warn:300,info:400,debug:500},e2=(e,t,u)=>{if(e){if(Object.prototype.hasOwnProperty.call(e1,e))return e;e5(u).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(e1))}`)}};function e8(){}function e3(e,t,u){return!t||e1[e]>e1[u]?e8:t[e].bind(t)}let e9={error:e8,warn:e8,info:e8,debug:e8},e6=new WeakMap;function e5(e){let t=e.logger,u=e.logLevel??"off";if(!t)return e9;let r=e6.get(t);if(r&&r[0]===u)return r[1];let s={error:e3("error",t,u),warn:e3("warn",t,u),info:e3("info",t,u),debug:e3("debug",t,u)};return e6.set(t,[u,s]),s}let e4=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"x-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class e7{constructor(e,t,u){this.iterator=e,n.set(this,void 0),this.controller=t,ep(this,n,u,"f")}static fromSSEResponse(e,t,u){let r=!1,s=u?e5(u):console;return new e7(async function*(){if(r)throw new em("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let u=!1;try{for await(let u of te(e,t)){if("completion"===u.event)try{yield JSON.parse(u.data)}catch(e){throw s.error("Could not parse message into JSON:",u.data),s.error("From chunk:",u.raw),e}if("message_start"===u.event||"message_delta"===u.event||"message_stop"===u.event||"content_block_start"===u.event||"content_block_delta"===u.event||"content_block_stop"===u.event)try{yield JSON.parse(u.data)}catch(e){throw s.error("Could not parse message into JSON:",u.data),s.error("From chunk:",u.raw),e}if("ping"!==u.event&&"error"===u.event)throw new eE(void 0,ej(u.data)??u.data,void 0,e.headers)}u=!0}catch(e){if(eC(e))return;throw e}finally{u||t.abort()}},t,u)}static fromReadableStream(e,t,u){let r=!1;async function*s(){let t=new e0;for await(let u of ez(e))for(let e of t.decode(u))yield e;for(let e of t.flush())yield e}return new e7(async function*(){if(r)throw new em("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{for await(let t of s())!e&&t&&(yield JSON.parse(t));e=!0}catch(e){if(eC(e))return;throw e}finally{e||t.abort()}},t,u)}[(n=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],t=[],u=this.iterator(),r=r=>({next:()=>{if(0===r.length){let r=u.next();e.push(r),t.push(r)}return r.shift()}});return[new e7(()=>r(e),this.controller,eF(this,n,"f")),new e7(()=>r(t),this.controller,eF(this,n,"f"))]}toReadableStream(){let e;let t=this;return eV({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:u,done:r}=await e.next();if(r)return t.close();let s=eZ(JSON.stringify(u)+"\n");t.enqueue(s)}catch(e){t.error(e)}},async cancel(){await e.return?.()}})}}async function*te(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new em("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new em("Attempted to iterate over a response with no body")}let u=new tu,r=new e0;for await(let t of tt(ez(e.body)))for(let e of r.decode(t)){let t=u.decode(e);t&&(yield t)}for(let e of r.flush()){let t=u.decode(e);t&&(yield t)}}async function*tt(e){let t=new Uint8Array;for await(let u of e){let e;if(null==u)continue;let r=u instanceof ArrayBuffer?new Uint8Array(u):"string"==typeof u?eZ(u):u,s=new Uint8Array(t.length+r.length);for(s.set(t),s.set(r,t.length),t=s;-1!==(e=function(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1]||13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return -1}(t));)yield t.slice(0,e),t=t.slice(e)}t.length>0&&(yield t)}class tu{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,u,r]=function(e,t){let u=e.indexOf(":");return -1!==u?[e.substring(0,u),":",e.substring(u+t.length)]:[e,"",""]}(e,":");return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}async function tr(e,t){let{response:u,requestLogID:r,retryOfRequestLogID:s,startTime:n}=t,i=await (async()=>{if(t.options.stream)return(e5(e).debug("response",u.status,u.url,u.headers,u.body),t.options.__streamClass)?t.options.__streamClass.fromSSEResponse(u,t.controller):e7.fromSSEResponse(u,t.controller);if(204===u.status)return null;if(t.options.__binaryResponse)return u;let r=u.headers.get("content-type"),s=r?.split(";")[0]?.trim();return s?.includes("application/json")||s?.endsWith("+json")?ts(await u.json(),u):await u.text()})();return e5(e).debug(`[${r}] response parsed`,e4({retryOfRequestLogID:s,url:u.url,status:u.status,body:i,durationMs:Date.now()-n})),i}function ts(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("request-id"),enumerable:!1})}class tn extends Promise{constructor(e,t,u=tr){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=u,i.set(this,void 0),ep(this,i,e,"f")}_thenUnwrap(e){return new tn(eF(this,i,"f"),this.responsePromise,async(t,u)=>ts(e(await this.parseResponse(t,u),u),u.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(eF(this,i,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}i=new WeakMap;class ti{constructor(e,t,u,r){a.set(this,void 0),ep(this,a,e,"f"),this.options=r,this.response=t,this.body=u}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new em("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await eF(this,a,"f").requestAPIList(this.constructor,e)}async *iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async *[(a=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}}class ta extends tn{constructor(e,t,u){super(e,t,async(e,t)=>new u(e,t.response,await tr(e,t),t.options))}async *[Symbol.asyncIterator](){for await(let e of(await this))yield e}}class to extends ti{constructor(e,t,u,r){super(e,t,u,r),this.data=u.data||[],this.has_more=u.has_more||!1,this.first_id=u.first_id||null,this.last_id=u.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){let e=this.first_id;return e?{...this.options,query:{...eI(this.options.query),before_id:e}}:null}let e=this.last_id;return e?{...this.options,query:{...eI(this.options.query),after_id:e}}:null}}class tl extends ti{constructor(e,t,u,r){super(e,t,u,r),this.data=u.data||[],this.has_more=u.has_more||!1,this.next_page=u.next_page||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){let e=this.next_page;return e?{...this.options,query:{...eI(this.options.query),page:e}}:null}}let tD=()=>{if("undefined"==typeof File){let{process:e}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof e?.versions?.node&&20>parseInt(e.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function tc(e,t,u){return tD(),new File(e,t??"unknown_file",u)}function th(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}let td=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],tf=async(e,t)=>({...e,body:await tF(e.body,t)}),tp=new WeakMap,tF=async(e,t)=>{if(!await function(e){let t="function"==typeof e?e:e.fetch,u=tp.get(t);if(u)return u;let r=(async()=>{try{let e="Response"in t?t.Response:(await t("data:,")).constructor,u=new FormData;if(u.toString()===await new e(u).text())return!1;return!0}catch{return!0}})();return tp.set(t,r),r}(t))throw TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let u=new FormData;return await Promise.all(Object.entries(e||{}).map(([e,t])=>tm(u,e,t))),u},tA=e=>e instanceof Blob&&"name"in e,tC=e=>"object"==typeof e&&null!==e&&(e instanceof Response||td(e)||tA(e)),tg=e=>{if(tC(e))return!0;if(Array.isArray(e))return e.some(tg);if(e&&"object"==typeof e){for(let t in e)if(tg(e[t]))return!0}return!1},tm=async(e,t,u)=>{if(void 0!==u){if(null==u)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof u||"number"==typeof u||"boolean"==typeof u)e.append(t,String(u));else if(u instanceof Response){let r={},s=u.headers.get("Content-Type");s&&(r={type:s}),e.append(t,tc([await u.blob()],th(u),r))}else if(td(u))e.append(t,tc([await new Response(eK(u)).blob()],th(u)));else if(tA(u))e.append(t,tc([u],th(u),{type:u.type}));else if(Array.isArray(u))await Promise.all(u.map(u=>tm(e,t+"[]",u)));else if("object"==typeof u)await Promise.all(Object.entries(u).map(([u,r])=>tm(e,`${t}[${u}]`,r)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${u} instead`)}},tE=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,ty=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&tE(e),tb=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob;async function tw(e,t,u){if(tD(),e=await e,t||(t=th(e)),ty(e))return e instanceof File&&null==t&&null==u?e:tc([await e.arrayBuffer()],t??e.name,{type:e.type,lastModified:e.lastModified,...u});if(tb(e)){let r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),tc(await tB(r),t,u)}let r=await tB(e);if(!u?.type){let e=r.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(u={...u,type:e})}return tc(r,t,u)}async function tB(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(tE(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(td(e))for await(let u of e)t.push(...await tB(u));else{let t=e?.constructor?.name;throw Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";let t=Object.getOwnPropertyNames(e);return`; props: [${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`)}return t}class t_{constructor(e){this._client=e}}let tv=Symbol.for("brand.privateNullableHeaders"),tk=e=>{let t=new Headers,u=new Set;for(let r of e){let e=new Set;for(let[s,n]of function*(e){let t;if(!e)return;if(tv in e){let{values:t,nulls:u}=e;for(let e of(yield*t.entries(),u))yield[e,null];return}let u=!1;for(let r of(e instanceof Headers?t=e.entries():eO(e)?t=e:(u=!0,t=Object.entries(e??{})),t)){let e=r[0];if("string"!=typeof e)throw TypeError("expected header name to be a string");let t=eO(r[1])?r[1]:[r[1]],s=!1;for(let r of t)void 0!==r&&(u&&!s&&(s=!0,yield[e,null]),yield[e,r])}}(r)){let r=s.toLowerCase();e.has(r)||(t.delete(s),e.add(r)),null===n?(t.delete(s),u.add(r)):(t.append(s,n),u.delete(r))}}return{[tv]:!0,values:t,nulls:u}};function tS(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}let tx=Object.freeze(Object.create(null)),tR=((e=tS)=>function(t,...u){let r;if(1===t.length)return t[0];let s=!1,n=[],i=t.reduce((t,r,i)=>{/[?#]/.test(r)&&(s=!0);let a=u[i],o=(s?encodeURIComponent:e)(""+a);return i!==u.length&&(null==a||"object"==typeof a&&a.toString===Object.getPrototypeOf(Object.getPrototypeOf(a.hasOwnProperty??tx)??tx)?.toString)&&(o=a+"",n.push({start:t.length+r.length,length:o.length,error:`Value of type ${Object.prototype.toString.call(a).slice(8,-1)} is not a valid path parameter`})),t+r+(i===u.length?"":o)},""),a=i.split(/[?#]/,1)[0],o=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(r=o.exec(a));)n.push({start:r.index,length:r[0].length,error:`Value "${r[0]}" can't be safely passed as a path parameter`});if(n.sort((e,t)=>e.start-t.start),n.length>0){let e=0,t=n.reduce((t,u)=>{let r=" ".repeat(u.start-e),s="^".repeat(u.length);return e=u.start+u.length,t+r+s},"");throw new em(`Path parameters result in path with invalid segments:
${n.map(e=>e.error).join("\n")}
${i}
${t}`)}return i})(tS);class tP extends t_{list(e={},t){let{betas:u,...r}=e??{};return this._client.getAPIList("/v1/files",to,{query:r,...t,headers:tk([{"anthropic-beta":[...u??[],"files-api-2025-04-14"].toString()},t?.headers])})}delete(e,t={},u){let{betas:r}=t??{};return this._client.delete(tR`/v1/files/${e}`,{...u,headers:tk([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},u?.headers])})}download(e,t={},u){let{betas:r}=t??{};return this._client.get(tR`/v1/files/${e}/content`,{...u,headers:tk([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},u?.headers]),__binaryResponse:!0})}retrieveMetadata(e,t={},u){let{betas:r}=t??{};return this._client.get(tR`/v1/files/${e}`,{...u,headers:tk([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},u?.headers])})}upload(e,t){let{betas:u,...r}=e;return this._client.post("/v1/files",tf({body:r,...t,headers:tk([{"anthropic-beta":[...u??[],"files-api-2025-04-14"].toString()},t?.headers])},this._client))}}class tM extends t_{retrieve(e,t={},u){let{betas:r}=t??{};return this._client.get(tR`/v1/models/${e}?beta=true`,{...u,headers:tk([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},u?.headers])})}list(e={},t){let{betas:u,...r}=e??{};return this._client.getAPIList("/v1/models?beta=true",to,{query:r,...t,headers:tk([{...u?.toString()!=null?{"anthropic-beta":u?.toString()}:void 0},t?.headers])})}}class t${constructor(e,t){this.iterator=e,this.controller=t}async *decoder(){let e=new e0;for await(let t of this.iterator)for(let u of e.decode(t))yield JSON.parse(u);for(let t of e.flush())yield JSON.parse(t)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new em("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new em("Attempted to iterate over a response with no body")}return new t$(ez(e.body),t)}}class tN extends t_{create(e,t){let{betas:u,...r}=e;return this._client.post("/v1/messages/batches?beta=true",{body:r,...t,headers:tk([{"anthropic-beta":[...u??[],"message-batches-2024-09-24"].toString()},t?.headers])})}retrieve(e,t={},u){let{betas:r}=t??{};return this._client.get(tR`/v1/messages/batches/${e}?beta=true`,{...u,headers:tk([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},u?.headers])})}list(e={},t){let{betas:u,...r}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",to,{query:r,...t,headers:tk([{"anthropic-beta":[...u??[],"message-batches-2024-09-24"].toString()},t?.headers])})}delete(e,t={},u){let{betas:r}=t??{};return this._client.delete(tR`/v1/messages/batches/${e}?beta=true`,{...u,headers:tk([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},u?.headers])})}cancel(e,t={},u){let{betas:r}=t??{};return this._client.post(tR`/v1/messages/batches/${e}/cancel?beta=true`,{...u,headers:tk([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},u?.headers])})}async results(e,t={},u){let r=await this.retrieve(e);if(!r.results_url)throw new em(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);let{betas:s}=t??{};return this._client.get(r.results_url,{...u,headers:tk([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},u?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>t$.fromResponse(t.response,t.controller))}}let tO=e=>{let t=0,u=[];for(;t<e.length;){let r=e[t];if("\\"===r){t++;continue}if("{"===r){u.push({type:"brace",value:"{"}),t++;continue}if("}"===r){u.push({type:"brace",value:"}"}),t++;continue}if("["===r){u.push({type:"paren",value:"["}),t++;continue}if("]"===r){u.push({type:"paren",value:"]"}),t++;continue}if(":"===r){u.push({type:"separator",value:":"}),t++;continue}if(","===r){u.push({type:"delimiter",value:","}),t++;continue}if('"'===r){let s="",n=!1;for(r=e[++t];'"'!==r;){if(t===e.length){n=!0;break}if("\\"===r){if(++t===e.length){n=!0;break}s+=r+e[t],r=e[++t]}else s+=r,r=e[++t]}r=e[++t],n||u.push({type:"string",value:s});continue}let s=/\s/;if(r&&s.test(r)){t++;continue}let n=/[0-9]/;if(r&&n.test(r)||"-"===r||"."===r){let s="";for("-"===r&&(s+=r,r=e[++t]);r&&n.test(r)||"."===r;)s+=r,r=e[++t];u.push({type:"number",value:s});continue}let i=/[a-z]/i;if(r&&i.test(r)){let s="";for(;r&&i.test(r)&&t!==e.length;)s+=r,r=e[++t];"true"==s||"false"==s||"null"===s?u.push({type:"name",value:s}):t++;continue}t++}return u},tI=e=>{if(0===e.length)return e;let t=e[e.length-1];switch(t.type){case"separator":return tI(e=e.slice(0,e.length-1));case"number":let u=t.value[t.value.length-1];if("."===u||"-"===u)return tI(e=e.slice(0,e.length-1));case"string":let r=e[e.length-2];if(r?.type==="delimiter"||r?.type==="brace"&&"{"===r.value)return tI(e=e.slice(0,e.length-1));break;case"delimiter":return tI(e=e.slice(0,e.length-1))}return e},tT=e=>{let t=[];return e.map(e=>{"brace"===e.type&&("{"===e.value?t.push("}"):t.splice(t.lastIndexOf("}"),1)),"paren"===e.type&&("["===e.value?t.push("]"):t.splice(t.lastIndexOf("]"),1))}),t.length>0&&t.reverse().map(t=>{"}"===t?e.push({type:"brace",value:"}"}):"]"===t&&e.push({type:"paren",value:"]"})}),e},tj=e=>{let t="";return e.map(e=>{"string"===e.type?t+='"'+e.value+'"':t+=e.value}),t},tL=e=>JSON.parse(tj(tT(tI(tO(e))))),tq="__json_buf";function tW(e){return"tool_use"===e.type||"server_tool_use"===e.type||"mcp_tool_use"===e.type}class tU{constructor(){o.add(this),this.messages=[],this.receivedMessages=[],l.set(this,void 0),this.controller=new AbortController,D.set(this,void 0),c.set(this,()=>{}),h.set(this,()=>{}),d.set(this,void 0),f.set(this,()=>{}),p.set(this,()=>{}),F.set(this,{}),A.set(this,!1),C.set(this,!1),g.set(this,!1),m.set(this,!1),E.set(this,void 0),y.set(this,void 0),B.set(this,e=>{if(ep(this,C,!0,"f"),eC(e)&&(e=new ey),e instanceof ey)return ep(this,g,!0,"f"),this._emit("abort",e);if(e instanceof em)return this._emit("error",e);if(e instanceof Error){let t=new em(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new em(String(e)))}),ep(this,D,new Promise((e,t)=>{ep(this,c,e,"f"),ep(this,h,t,"f")}),"f"),ep(this,d,new Promise((e,t)=>{ep(this,f,e,"f"),ep(this,p,t,"f")}),"f"),eF(this,D,"f").catch(()=>{}),eF(this,d,"f").catch(()=>{})}get response(){return eF(this,E,"f")}get request_id(){return eF(this,y,"f")}async withResponse(){let e=await eF(this,D,"f");if(!e)throw Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let t=new tU;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,u){let r=new tU;for(let e of t.messages)r._addMessageParam(e);return r._run(()=>r._createMessage(e,{...t,stream:!0},{...u,headers:{...u?.headers,"X-Stainless-Helper-Method":"stream"}})),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},eF(this,B,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,u){let r;let s=u?.signal;s&&(s.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),s.addEventListener("abort",r));try{eF(this,o,"m",_).call(this);let{response:r,data:s}=await e.create({...t,stream:!0},{...u,signal:this.controller.signal}).withResponse();for await(let e of(this._connected(r),s))eF(this,o,"m",v).call(this,e);if(s.controller.signal?.aborted)throw new ey;eF(this,o,"m",k).call(this)}finally{s&&r&&s.removeEventListener("abort",r)}}_connected(e){this.ended||(ep(this,E,e,"f"),ep(this,y,e?.headers.get("request-id"),"f"),eF(this,c,"f").call(this,e),this._emit("connect"))}get ended(){return eF(this,A,"f")}get errored(){return eF(this,C,"f")}get aborted(){return eF(this,g,"f")}abort(){this.controller.abort()}on(e,t){return(eF(this,F,"f")[e]||(eF(this,F,"f")[e]=[])).push({listener:t}),this}off(e,t){let u=eF(this,F,"f")[e];if(!u)return this;let r=u.findIndex(e=>e.listener===t);return r>=0&&u.splice(r,1),this}once(e,t){return(eF(this,F,"f")[e]||(eF(this,F,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,u)=>{ep(this,m,!0,"f"),"error"!==e&&this.once("error",u),this.once(e,t)})}async done(){ep(this,m,!0,"f"),await eF(this,d,"f")}get currentMessage(){return eF(this,l,"f")}async finalMessage(){return await this.done(),eF(this,o,"m",b).call(this)}async finalText(){return await this.done(),eF(this,o,"m",w).call(this)}_emit(e,...t){if(eF(this,A,"f"))return;"end"===e&&(ep(this,A,!0,"f"),eF(this,f,"f").call(this));let u=eF(this,F,"f")[e];if(u&&(eF(this,F,"f")[e]=u.filter(e=>!e.once),u.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];eF(this,m,"f")||u?.length||Promise.reject(e),eF(this,h,"f").call(this,e),eF(this,p,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];eF(this,m,"f")||u?.length||Promise.reject(e),eF(this,h,"f").call(this,e),eF(this,p,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",eF(this,o,"m",b).call(this))}async _fromReadableStream(e,t){let u;let r=t?.signal;r&&(r.aborted&&this.controller.abort(),u=this.controller.abort.bind(this.controller),r.addEventListener("abort",u));try{eF(this,o,"m",_).call(this),this._connected(null);let t=e7.fromReadableStream(e,this.controller);for await(let e of t)eF(this,o,"m",v).call(this,e);if(t.controller.signal?.aborted)throw new ey;eF(this,o,"m",k).call(this)}finally{r&&u&&r.removeEventListener("abort",u)}}[(l=new WeakMap,D=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,F=new WeakMap,A=new WeakMap,C=new WeakMap,g=new WeakMap,m=new WeakMap,E=new WeakMap,y=new WeakMap,B=new WeakMap,o=new WeakSet,b=function(){if(0===this.receivedMessages.length)throw new em("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},w=function(){if(0===this.receivedMessages.length)throw new em("stream ended without producing a Message with role=assistant");let e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new em("stream ended without producing a content block with type=text");return e.join(" ")},_=function(){this.ended||ep(this,l,void 0,"f")},v=function(e){if(this.ended)return;let t=eF(this,o,"m",S).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{let u=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===u.type&&this._emit("text",e.delta.text,u.text||"");break;case"citations_delta":"text"===u.type&&this._emit("citation",e.delta.citation,u.citations??[]);break;case"input_json_delta":tW(u)&&u.input&&this._emit("inputJson",e.delta.partial_json,u.input);break;case"thinking_delta":"thinking"===u.type&&this._emit("thinking",e.delta.thinking,u.thinking);break;case"signature_delta":"thinking"===u.type&&this._emit("signature",u.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":ep(this,l,t,"f")}},k=function(){if(this.ended)throw new em("stream has ended, this shouldn't happen");let e=eF(this,l,"f");if(!e)throw new em("request ended without sending any chunks");return ep(this,l,void 0,"f"),e},S=function(e){let t=eF(this,l,"f");if("message_start"===e.type){if(t)throw new em(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new em(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.container=e.delta.container,t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,t.context_management=e.context_management,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push(e.content_block),t;case"content_block_delta":{let u=t.content.at(e.index);switch(e.delta.type){case"text_delta":u?.type==="text"&&(t.content[e.index]={...u,text:(u.text||"")+e.delta.text});break;case"citations_delta":u?.type==="text"&&(t.content[e.index]={...u,citations:[...u.citations??[],e.delta.citation]});break;case"input_json_delta":if(u&&tW(u)){let r=u[tq]||"";r+=e.delta.partial_json;let s={...u};if(Object.defineProperty(s,tq,{value:r,enumerable:!1,writable:!0}),r)try{s.input=tL(r)}catch(t){let e=new em(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${t}. JSON: ${r}`);eF(this,B,"f").call(this,e)}t.content[e.index]=s}break;case"thinking_delta":u?.type==="thinking"&&(t.content[e.index]={...u,thinking:u.thinking+e.delta.thinking});break;case"signature_delta":u?.type==="thinking"&&(t.content[e.index]={...u,signature:e.delta.signature});break;default:e.delta}return t}}},Symbol.asyncIterator)](){let e=[],t=[],u=!1;return this.on("streamEvent",u=>{let r=t.shift();r?r.resolve(u):e.push(u)}),this.on("end",()=>{for(let e of(u=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let r of(u=!0,t))r.reject(e);t.length=0}),this.on("error",e=>{for(let r of(u=!0,t))r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:u?{value:void 0,done:!0}:new Promise((e,u)=>t.push({resolve:e,reject:u})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new e7(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}let tJ={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};function tX(){let e,t;return{promise:new Promise((u,r)=>{e=u,t=r}),resolve:e,reject:t}}class tH{constructor(e,t,u){x.add(this),this.client=e,R.set(this,!1),P.set(this,!1),M.set(this,void 0),$.set(this,void 0),N.set(this,void 0),O.set(this,void 0),I.set(this,void 0),T.set(this,0),ep(this,M,{params:{...t,messages:structuredClone(t.messages)}},"f"),ep(this,$,{...u,headers:tk([{"x-stainless-helper":"BetaToolRunner"},u?.headers])},"f"),ep(this,I,tX(),"f")}async *[(R=new WeakMap,P=new WeakMap,M=new WeakMap,$=new WeakMap,N=new WeakMap,O=new WeakMap,I=new WeakMap,T=new WeakMap,x=new WeakSet,Symbol.asyncIterator)](){var e;if(eF(this,R,"f"))throw new em("Cannot iterate over a consumed stream");ep(this,R,!0,"f"),ep(this,P,!0,"f"),ep(this,O,void 0,"f");try{for(;;){let t;try{if(eF(this,M,"f").params.max_iterations&&eF(this,T,"f")>=eF(this,M,"f").params.max_iterations)break;ep(this,P,!1,"f"),ep(this,N,void 0,"f"),ep(this,O,void 0,"f"),ep(this,T,(e=eF(this,T,"f"),++e),"f");let{max_iterations:u,...r}=eF(this,M,"f").params;if(r.stream?(t=this.client.beta.messages.stream({...r},eF(this,$,"f")),ep(this,N,t.finalMessage(),"f"),eF(this,N,"f").catch(()=>{}),yield t):(ep(this,N,this.client.beta.messages.create({...r,stream:!1},eF(this,$,"f")),"f"),yield eF(this,N,"f")),!eF(this,P,"f")){let{role:e,content:t}=await eF(this,N,"f");eF(this,M,"f").params.messages.push({role:e,content:t})}let s=await eF(this,x,"m",j).call(this,eF(this,M,"f").params.messages.at(-1));if(s&&eF(this,M,"f").params.messages.push(s),!s&&!eF(this,P,"f"))break}finally{t&&t.abort()}}if(!eF(this,N,"f"))throw new em("ToolRunner concluded without a message from the server");eF(this,I,"f").resolve(await eF(this,N,"f"))}catch(e){throw ep(this,R,!1,"f"),eF(this,I,"f").promise.catch(()=>{}),eF(this,I,"f").reject(e),ep(this,I,tX(),"f"),e}}setMessagesParams(e){"function"==typeof e?eF(this,M,"f").params=e(eF(this,M,"f").params):eF(this,M,"f").params=e,ep(this,P,!0,"f"),ep(this,O,void 0,"f")}async generateToolResponse(){let e=await eF(this,N,"f")??this.params.messages.at(-1);return e?eF(this,x,"m",j).call(this,e):null}done(){return eF(this,I,"f").promise}async runUntilDone(){if(!eF(this,R,"f"))for await(let e of this);return this.done()}get params(){return eF(this,M,"f").params}pushMessages(...e){this.setMessagesParams(t=>({...t,messages:[...t.messages,...e]}))}then(e,t){return this.runUntilDone().then(e,t)}}async function tV(e,t=e.messages.at(-1)){if(!t||"assistant"!==t.role||!t.content||"string"==typeof t.content)return null;let u=t.content.filter(e=>"tool_use"===e.type);return 0===u.length?null:{role:"user",content:await Promise.all(u.map(async t=>{let u=e.tools.find(e=>e.name===t.name);if(!u||!("run"in u))return{type:"tool_result",tool_use_id:t.id,content:`Error: Tool '${t.name}' not found`,is_error:!0};try{let e=t.input;"parse"in u&&u.parse&&(e=u.parse(e));let r=await u.run(e);return{type:"tool_result",tool_use_id:t.id,content:r}}catch(e){return{type:"tool_result",tool_use_id:t.id,content:`Error: ${e instanceof Error?e.message:String(e)}`,is_error:!0}}}))}}j=async function(e){return void 0!==eF(this,O,"f")||ep(this,O,tV(eF(this,M,"f").params,e),"f"),eF(this,O,"f")};let tK={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};class tz extends t_{constructor(){super(...arguments),this.batches=new tN(this._client)}create(e,t){let{betas:u,...r}=e;r.model in tK&&console.warn(`The model '${r.model}' is deprecated and will reach end-of-life on ${tK[r.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let s=this._client._options.timeout;if(!r.stream&&null==s){let e=tJ[r.model]??void 0;s=this._client.calculateNonstreamingTimeout(r.max_tokens,e)}return this._client.post("/v1/messages?beta=true",{body:r,timeout:s??6e5,...t,headers:tk([{...u?.toString()!=null?{"anthropic-beta":u?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}stream(e,t){return tU.createMessage(this,e,t)}countTokens(e,t){let{betas:u,...r}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:r,...t,headers:tk([{"anthropic-beta":[...u??[],"token-counting-2024-11-01"].toString()},t?.headers])})}toolRunner(e,t){return new tH(this._client,e,t)}}tz.Batches=tN,tz.BetaToolRunner=tH;class tG extends t_{create(e,t={},u){let{betas:r,...s}=t??{};return this._client.post(tR`/v1/skills/${e}/versions?beta=true`,tf({body:s,...u,headers:tk([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},u?.headers])},this._client))}retrieve(e,t,u){let{skill_id:r,betas:s}=t;return this._client.get(tR`/v1/skills/${r}/versions/${e}?beta=true`,{...u,headers:tk([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},u?.headers])})}list(e,t={},u){let{betas:r,...s}=t??{};return this._client.getAPIList(tR`/v1/skills/${e}/versions?beta=true`,tl,{query:s,...u,headers:tk([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},u?.headers])})}delete(e,t,u){let{skill_id:r,betas:s}=t;return this._client.delete(tR`/v1/skills/${r}/versions/${e}?beta=true`,{...u,headers:tk([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},u?.headers])})}}class tQ extends t_{constructor(){super(...arguments),this.versions=new tG(this._client)}create(e={},t){let{betas:u,...r}=e??{};return this._client.post("/v1/skills?beta=true",tf({body:r,...t,headers:tk([{"anthropic-beta":[...u??[],"skills-2025-10-02"].toString()},t?.headers])},this._client))}retrieve(e,t={},u){let{betas:r}=t??{};return this._client.get(tR`/v1/skills/${e}?beta=true`,{...u,headers:tk([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},u?.headers])})}list(e={},t){let{betas:u,...r}=e??{};return this._client.getAPIList("/v1/skills?beta=true",tl,{query:r,...t,headers:tk([{"anthropic-beta":[...u??[],"skills-2025-10-02"].toString()},t?.headers])})}delete(e,t={},u){let{betas:r}=t??{};return this._client.delete(tR`/v1/skills/${e}?beta=true`,{...u,headers:tk([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},u?.headers])})}}tQ.Versions=tG;class tZ extends t_{constructor(){super(...arguments),this.models=new tM(this._client),this.messages=new tz(this._client),this.files=new tP(this._client),this.skills=new tQ(this._client)}}tZ.Models=tM,tZ.Messages=tz,tZ.Files=tP,tZ.Skills=tQ;class tY extends t_{create(e,t){let{betas:u,...r}=e;return this._client.post("/v1/complete",{body:r,timeout:this._client._options.timeout??6e5,...t,headers:tk([{...u?.toString()!=null?{"anthropic-beta":u?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}}let t0="__json_buf";function t1(e){return"tool_use"===e.type||"server_tool_use"===e.type}class t2{constructor(){L.add(this),this.messages=[],this.receivedMessages=[],q.set(this,void 0),this.controller=new AbortController,W.set(this,void 0),U.set(this,()=>{}),J.set(this,()=>{}),X.set(this,void 0),H.set(this,()=>{}),V.set(this,()=>{}),K.set(this,{}),z.set(this,!1),G.set(this,!1),Q.set(this,!1),Z.set(this,!1),Y.set(this,void 0),ee.set(this,void 0),er.set(this,e=>{if(ep(this,G,!0,"f"),eC(e)&&(e=new ey),e instanceof ey)return ep(this,Q,!0,"f"),this._emit("abort",e);if(e instanceof em)return this._emit("error",e);if(e instanceof Error){let t=new em(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new em(String(e)))}),ep(this,W,new Promise((e,t)=>{ep(this,U,e,"f"),ep(this,J,t,"f")}),"f"),ep(this,X,new Promise((e,t)=>{ep(this,H,e,"f"),ep(this,V,t,"f")}),"f"),eF(this,W,"f").catch(()=>{}),eF(this,X,"f").catch(()=>{})}get response(){return eF(this,Y,"f")}get request_id(){return eF(this,ee,"f")}async withResponse(){let e=await eF(this,W,"f");if(!e)throw Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let t=new t2;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,u){let r=new t2;for(let e of t.messages)r._addMessageParam(e);return r._run(()=>r._createMessage(e,{...t,stream:!0},{...u,headers:{...u?.headers,"X-Stainless-Helper-Method":"stream"}})),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},eF(this,er,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,u){let r;let s=u?.signal;s&&(s.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),s.addEventListener("abort",r));try{eF(this,L,"m",es).call(this);let{response:r,data:s}=await e.create({...t,stream:!0},{...u,signal:this.controller.signal}).withResponse();for await(let e of(this._connected(r),s))eF(this,L,"m",en).call(this,e);if(s.controller.signal?.aborted)throw new ey;eF(this,L,"m",ei).call(this)}finally{s&&r&&s.removeEventListener("abort",r)}}_connected(e){this.ended||(ep(this,Y,e,"f"),ep(this,ee,e?.headers.get("request-id"),"f"),eF(this,U,"f").call(this,e),this._emit("connect"))}get ended(){return eF(this,z,"f")}get errored(){return eF(this,G,"f")}get aborted(){return eF(this,Q,"f")}abort(){this.controller.abort()}on(e,t){return(eF(this,K,"f")[e]||(eF(this,K,"f")[e]=[])).push({listener:t}),this}off(e,t){let u=eF(this,K,"f")[e];if(!u)return this;let r=u.findIndex(e=>e.listener===t);return r>=0&&u.splice(r,1),this}once(e,t){return(eF(this,K,"f")[e]||(eF(this,K,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,u)=>{ep(this,Z,!0,"f"),"error"!==e&&this.once("error",u),this.once(e,t)})}async done(){ep(this,Z,!0,"f"),await eF(this,X,"f")}get currentMessage(){return eF(this,q,"f")}async finalMessage(){return await this.done(),eF(this,L,"m",et).call(this)}async finalText(){return await this.done(),eF(this,L,"m",eu).call(this)}_emit(e,...t){if(eF(this,z,"f"))return;"end"===e&&(ep(this,z,!0,"f"),eF(this,H,"f").call(this));let u=eF(this,K,"f")[e];if(u&&(eF(this,K,"f")[e]=u.filter(e=>!e.once),u.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];eF(this,Z,"f")||u?.length||Promise.reject(e),eF(this,J,"f").call(this,e),eF(this,V,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];eF(this,Z,"f")||u?.length||Promise.reject(e),eF(this,J,"f").call(this,e),eF(this,V,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",eF(this,L,"m",et).call(this))}async _fromReadableStream(e,t){let u;let r=t?.signal;r&&(r.aborted&&this.controller.abort(),u=this.controller.abort.bind(this.controller),r.addEventListener("abort",u));try{eF(this,L,"m",es).call(this),this._connected(null);let t=e7.fromReadableStream(e,this.controller);for await(let e of t)eF(this,L,"m",en).call(this,e);if(t.controller.signal?.aborted)throw new ey;eF(this,L,"m",ei).call(this)}finally{r&&u&&r.removeEventListener("abort",u)}}[(q=new WeakMap,W=new WeakMap,U=new WeakMap,J=new WeakMap,X=new WeakMap,H=new WeakMap,V=new WeakMap,K=new WeakMap,z=new WeakMap,G=new WeakMap,Q=new WeakMap,Z=new WeakMap,Y=new WeakMap,ee=new WeakMap,er=new WeakMap,L=new WeakSet,et=function(){if(0===this.receivedMessages.length)throw new em("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},eu=function(){if(0===this.receivedMessages.length)throw new em("stream ended without producing a Message with role=assistant");let e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new em("stream ended without producing a content block with type=text");return e.join(" ")},es=function(){this.ended||ep(this,q,void 0,"f")},en=function(e){if(this.ended)return;let t=eF(this,L,"m",ea).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{let u=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===u.type&&this._emit("text",e.delta.text,u.text||"");break;case"citations_delta":"text"===u.type&&this._emit("citation",e.delta.citation,u.citations??[]);break;case"input_json_delta":t1(u)&&u.input&&this._emit("inputJson",e.delta.partial_json,u.input);break;case"thinking_delta":"thinking"===u.type&&this._emit("thinking",e.delta.thinking,u.thinking);break;case"signature_delta":"thinking"===u.type&&this._emit("signature",u.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":ep(this,q,t,"f")}},ei=function(){if(this.ended)throw new em("stream has ended, this shouldn't happen");let e=eF(this,q,"f");if(!e)throw new em("request ended without sending any chunks");return ep(this,q,void 0,"f"),e},ea=function(e){let t=eF(this,q,"f");if("message_start"===e.type){if(t)throw new em(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new em(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push({...e.content_block}),t;case"content_block_delta":{let u=t.content.at(e.index);switch(e.delta.type){case"text_delta":u?.type==="text"&&(t.content[e.index]={...u,text:(u.text||"")+e.delta.text});break;case"citations_delta":u?.type==="text"&&(t.content[e.index]={...u,citations:[...u.citations??[],e.delta.citation]});break;case"input_json_delta":if(u&&t1(u)){let r=u[t0]||"";r+=e.delta.partial_json;let s={...u};Object.defineProperty(s,t0,{value:r,enumerable:!1,writable:!0}),r&&(s.input=tL(r)),t.content[e.index]=s}break;case"thinking_delta":u?.type==="thinking"&&(t.content[e.index]={...u,thinking:u.thinking+e.delta.thinking});break;case"signature_delta":u?.type==="thinking"&&(t.content[e.index]={...u,signature:e.delta.signature});break;default:e.delta}return t}}},Symbol.asyncIterator)](){let e=[],t=[],u=!1;return this.on("streamEvent",u=>{let r=t.shift();r?r.resolve(u):e.push(u)}),this.on("end",()=>{for(let e of(u=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let r of(u=!0,t))r.reject(e);t.length=0}),this.on("error",e=>{for(let r of(u=!0,t))r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:u?{value:void 0,done:!0}:new Promise((e,u)=>t.push({resolve:e,reject:u})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new e7(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class t8 extends t_{create(e,t){return this._client.post("/v1/messages/batches",{body:e,...t})}retrieve(e,t){return this._client.get(tR`/v1/messages/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/v1/messages/batches",to,{query:e,...t})}delete(e,t){return this._client.delete(tR`/v1/messages/batches/${e}`,t)}cancel(e,t){return this._client.post(tR`/v1/messages/batches/${e}/cancel`,t)}async results(e,t){let u=await this.retrieve(e);if(!u.results_url)throw new em(`No batch \`results_url\`; Has it finished processing? ${u.processing_status} - ${u.id}`);return this._client.get(u.results_url,{...t,headers:tk([{Accept:"application/binary"},t?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>t$.fromResponse(t.response,t.controller))}}class t3 extends t_{constructor(){super(...arguments),this.batches=new t8(this._client)}create(e,t){e.model in t9&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${t9[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let u=this._client._options.timeout;if(!e.stream&&null==u){let t=tJ[e.model]??void 0;u=this._client.calculateNonstreamingTimeout(e.max_tokens,t)}return this._client.post("/v1/messages",{body:e,timeout:u??6e5,...t,stream:e.stream??!1})}stream(e,t){return t2.createMessage(this,e,t)}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",{body:e,...t})}}let t9={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};t3.Batches=t8;class t6 extends t_{retrieve(e,t={},u){let{betas:r}=t??{};return this._client.get(tR`/v1/models/${e}`,{...u,headers:tk([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},u?.headers])})}list(e={},t){let{betas:u,...r}=e??{};return this._client.getAPIList("/v1/models",to,{query:r,...t,headers:tk([{...u?.toString()!=null?{"anthropic-beta":u?.toString()}:void 0},t?.headers])})}}let t5=e=>void 0!==globalThis.process?globalThis.process.env?.[e]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(e)?.trim():void 0;class t4{constructor({baseURL:e=t5("ANTHROPIC_BASE_URL"),apiKey:t=t5("ANTHROPIC_API_KEY")??null,authToken:u=t5("ANTHROPIC_AUTH_TOKEN")??null,...r}={}){eo.add(this),eD.set(this,void 0);let s={apiKey:t,authToken:u,...r,baseURL:e||"https://api.anthropic.com"};if(!s.dangerouslyAllowBrowser&&eW())throw new em("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");this.baseURL=s.baseURL,this.timeout=s.timeout??el.DEFAULT_TIMEOUT,this.logger=s.logger??console;let n="warn";this.logLevel=n,this.logLevel=e2(s.logLevel,"ClientOptions.logLevel",this)??e2(t5("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??n,this.fetchOptions=s.fetchOptions,this.maxRetries=s.maxRetries??2,this.fetch=s.fetch??function(){if("undefined"!=typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),ep(this,eD,eQ,"f"),this._options=s,this.apiKey=t,this.authToken=u}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(this.apiKey&&e.get("x-api-key")||t.has("x-api-key")||this.authToken&&e.get("authorization")||t.has("authorization")))throw Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return tk([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(null!=this.apiKey)return tk([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(null!=this.authToken)return tk([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new em(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${eq}`}defaultIdempotencyKey(){return`stainless-node-retry-${eA()}`}makeStatusError(e,t,u,r){return eE.generate(e,t,u,r)}buildURL(e,t,u){let r=!eF(this,eo,"m",ec).call(this)&&u||this.baseURL,s=new URL(e$(e)?e:r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return!function(e){if(!e)return!0;for(let t in e)return!1;return!0}(n)&&(t={...n,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(s.search=this.stringifyQuery(t)),s.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new em("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 6e5}async prepareOptions(e){}async prepareRequest(e,{url:t,options:u}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,u){return this.request(Promise.resolve(u).then(u=>({method:e,path:t,...u})))}request(e,t=null){return new tn(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,u){let r=await e,s=r.maxRetries??this.maxRetries;null==t&&(t=s),await this.prepareOptions(r);let{req:n,url:i,timeout:a}=await this.buildRequest(r,{retryCount:s-t});await this.prepareRequest(n,{url:i,options:r});let o="log_"+(16777216*Math.random()|0).toString(16).padStart(6,"0"),l=void 0===u?"":`, retryOf: ${u}`,D=Date.now();if(e5(this).debug(`[${o}] sending request`,e4({retryOfRequestLogID:u,method:r.method,url:i,options:r,headers:n.headers})),r.signal?.aborted)throw new ey;let c=new AbortController,h=await this.fetchWithTimeout(i,n,a,c).catch(eg),d=Date.now();if(h instanceof globalThis.Error){let e=`retrying, ${t} attempts remaining`;if(r.signal?.aborted)throw new ey;let s=eC(h)||/timed? ?out/i.test(String(h)+("cause"in h?String(h.cause):""));if(t)return e5(this).info(`[${o}] connection ${s?"timed out":"failed"} - ${e}`),e5(this).debug(`[${o}] connection ${s?"timed out":"failed"} (${e})`,e4({retryOfRequestLogID:u,url:i,durationMs:d-D,message:h.message})),this.retryRequest(r,t,u??o);if(e5(this).info(`[${o}] connection ${s?"timed out":"failed"} - error; no more retries left`),e5(this).debug(`[${o}] connection ${s?"timed out":"failed"} (error; no more retries left)`,e4({retryOfRequestLogID:u,url:i,durationMs:d-D,message:h.message})),s)throw new ew;throw new eb({cause:h})}let f=[...h.headers.entries()].filter(([e])=>"request-id"===e).map(([e,t])=>", "+e+": "+JSON.stringify(t)).join(""),p=`[${o}${l}${f}] ${n.method} ${i} ${h.ok?"succeeded":"failed"} with status ${h.status} in ${d-D}ms`;if(!h.ok){let e=await this.shouldRetry(h);if(t&&e){let e=`retrying, ${t} attempts remaining`;return await eG(h.body),e5(this).info(`${p} - ${e}`),e5(this).debug(`[${o}] response error (${e})`,e4({retryOfRequestLogID:u,url:h.url,status:h.status,headers:h.headers,durationMs:d-D})),this.retryRequest(r,t,u??o,h.headers)}let s=e?"error; no more retries left":"error; not retryable";e5(this).info(`${p} - ${s}`);let n=await h.text().catch(e=>eg(e).message),i=ej(n),a=i?void 0:n;throw e5(this).debug(`[${o}] response error (${s})`,e4({retryOfRequestLogID:u,url:h.url,status:h.status,headers:h.headers,message:a,durationMs:Date.now()-D})),this.makeStatusError(h.status,i,a,h.headers)}return e5(this).info(p),e5(this).debug(`[${o}] response start`,e4({retryOfRequestLogID:u,url:h.url,status:h.status,headers:h.headers,durationMs:d-D})),{response:h,options:r,controller:c,requestLogID:o,retryOfRequestLogID:u,startTime:D}}getAPIList(e,t,u){return this.requestAPIList(t,{method:"get",path:e,...u})}requestAPIList(e,t){return new ta(this,this.makeRequest(t,null,void 0),e)}async fetchWithTimeout(e,t,u,r){let{signal:s,method:n,...i}=t||{};s&&s.addEventListener("abort",()=>r.abort());let a=setTimeout(()=>r.abort(),u),o=globalThis.ReadableStream&&i.body instanceof globalThis.ReadableStream||"object"==typeof i.body&&null!==i.body&&Symbol.asyncIterator in i.body,l={signal:r.signal,...o?{duplex:"half"}:{},method:"GET",...i};n&&(l.method=n.toUpperCase());try{return await this.fetch.call(void 0,e,l)}finally{clearTimeout(a)}}async shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,u,r){let s;let n=r?.get("retry-after-ms");if(n){let e=parseFloat(n);Number.isNaN(e)||(s=e)}let i=r?.get("retry-after");if(i&&!s){let e=parseFloat(i);s=Number.isNaN(e)?Date.parse(i)-Date.now():1e3*e}if(!(s&&0<=s&&s<6e4)){let u=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(t,u)}return await eL(s),this.makeRequest(e,t-1,u)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}calculateNonstreamingTimeout(e,t){if(36e5*e/128e3>6e5||null!=t&&e>t)throw new em("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(e,{retryCount:t=0}={}){let u={...e},{method:r,path:s,query:n,defaultBaseURL:i}=u,a=this.buildURL(s,n,i);"timeout"in u&&eT("timeout",u.timeout),u.timeout=u.timeout??this.timeout;let{bodyHeaders:o,body:l}=this.buildBody({options:u}),D=await this.buildHeaders({options:e,method:r,bodyHeaders:o,retryCount:t});return{req:{method:r,headers:D,...u.signal&&{signal:u.signal},...globalThis.ReadableStream&&l instanceof globalThis.ReadableStream&&{duplex:"half"},...l&&{body:l},...this.fetchOptions??{},...u.fetchOptions??{}},url:a,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:u,retryCount:r}){let s={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let n=tk([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...eH(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(e),this._options.defaultHeaders,u,e.headers]);return this.validateHeaders(n),n.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};let u=tk([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&u.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:eK(e)}:eF(this,eD,"f").call(this,{body:e,headers:u})}}el=t4,eD=new WeakMap,eo=new WeakSet,ec=function(){return"https://api.anthropic.com"!==this.baseURL},t4.Anthropic=el,t4.HUMAN_PROMPT="\\n\\nHuman:",t4.AI_PROMPT="\\n\\nAssistant:",t4.DEFAULT_TIMEOUT=6e5,t4.AnthropicError=em,t4.APIError=eE,t4.APIConnectionError=eb,t4.APIConnectionTimeoutError=ew,t4.APIUserAbortError=ey,t4.NotFoundError=ek,t4.ConflictError=eS,t4.RateLimitError=eR,t4.BadRequestError=eB,t4.AuthenticationError=e_,t4.InternalServerError=eP,t4.PermissionDeniedError=ev,t4.UnprocessableEntityError=ex,t4.toFile=tw;class t7 extends t4{constructor(){super(...arguments),this.completions=new tY(this),this.messages=new t3(this),this.models=new t6(this),this.beta=new tZ(this)}}t7.Completions=tY,t7.Messages=t3,t7.Models=t6,t7.Beta=tZ},7408:(e,t,u)=>{let r,s,n,i,a,o,l,D,c,h,d,f,p,F;u.d(t,{Z:()=>M});var A={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},C={isSpaceSeparator:e=>"string"==typeof e&&A.Space_Separator.test(e),isIdStartChar:e=>"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||A.ID_Start.test(e)),isIdContinueChar:e=>"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||""===e||""===e||A.ID_Continue.test(e)),isDigit:e=>"string"==typeof e&&/[0-9]/.test(e),isHexDigit:e=>"string"==typeof e&&/[0-9A-Fa-f]/.test(e)};function g(){if(r[i])return String.fromCodePoint(r.codePointAt(i))}function m(){let e=g();return"\n"===e?(a++,o=0):e?o+=e.length:o++,e&&(i+=e.length),e}let E={default(){switch(F){case"	":case"\v":case"\f":case" ":case"\xa0":case"\uFEFF":case"\n":case"\r":case"\u2028":case"\u2029":m();return;case"/":m(),h="comment";return;case void 0:return m(),y("eof")}if(C.isSpaceSeparator(F)){m();return}return E[s]()},comment(){switch(F){case"*":m(),h="multiLineComment";return;case"/":m(),h="singleLineComment";return}throw k(m())},multiLineComment(){switch(F){case"*":m(),h="multiLineCommentAsterisk";return;case void 0:throw k(m())}m()},multiLineCommentAsterisk(){switch(F){case"*":m();return;case"/":m(),h="default";return;case void 0:throw k(m())}m(),h="multiLineComment"},singleLineComment(){switch(F){case"\n":case"\r":case"\u2028":case"\u2029":m(),h="default";return;case void 0:return m(),y("eof")}m()},value(){switch(F){case"{":case"[":return y("punctuator",m());case"n":return m(),b("ull"),y("null",null);case"t":return m(),b("rue"),y("boolean",!0);case"f":return m(),b("alse"),y("boolean",!1);case"-":case"+":"-"===m()&&(p=-1),h="sign";return;case".":d=m(),h="decimalPointLeading";return;case"0":d=m(),h="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d=m(),h="decimalInteger";return;case"I":return m(),b("nfinity"),y("numeric",1/0);case"N":return m(),b("aN"),y("numeric",NaN);case'"':case"'":f='"'===m(),d="",h="string";return}throw k(m())},identifierNameStartEscape(){if("u"!==F)throw k(m());m();let e=w();switch(e){case"$":case"_":break;default:if(!C.isIdStartChar(e))throw x()}d+=e,h="identifierName"},identifierName(){switch(F){case"$":case"_":case"":case"":d+=m();return;case"\\":m(),h="identifierNameEscape";return}if(C.isIdContinueChar(F)){d+=m();return}return y("identifier",d)},identifierNameEscape(){if("u"!==F)throw k(m());m();let e=w();switch(e){case"$":case"_":case"":case"":break;default:if(!C.isIdContinueChar(e))throw x()}d+=e,h="identifierName"},sign(){switch(F){case".":d=m(),h="decimalPointLeading";return;case"0":d=m(),h="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d=m(),h="decimalInteger";return;case"I":return m(),b("nfinity"),y("numeric",1/0*p);case"N":return m(),b("aN"),y("numeric",NaN)}throw k(m())},zero(){switch(F){case".":d+=m(),h="decimalPoint";return;case"e":case"E":d+=m(),h="decimalExponent";return;case"x":case"X":d+=m(),h="hexadecimal";return}return y("numeric",0*p)},decimalInteger(){switch(F){case".":d+=m(),h="decimalPoint";return;case"e":case"E":d+=m(),h="decimalExponent";return}if(C.isDigit(F)){d+=m();return}return y("numeric",p*Number(d))},decimalPointLeading(){if(C.isDigit(F)){d+=m(),h="decimalFraction";return}throw k(m())},decimalPoint(){switch(F){case"e":case"E":d+=m(),h="decimalExponent";return}if(C.isDigit(F)){d+=m(),h="decimalFraction";return}return y("numeric",p*Number(d))},decimalFraction(){switch(F){case"e":case"E":d+=m(),h="decimalExponent";return}if(C.isDigit(F)){d+=m();return}return y("numeric",p*Number(d))},decimalExponent(){switch(F){case"+":case"-":d+=m(),h="decimalExponentSign";return}if(C.isDigit(F)){d+=m(),h="decimalExponentInteger";return}throw k(m())},decimalExponentSign(){if(C.isDigit(F)){d+=m(),h="decimalExponentInteger";return}throw k(m())},decimalExponentInteger(){if(C.isDigit(F)){d+=m();return}return y("numeric",p*Number(d))},hexadecimal(){if(C.isHexDigit(F)){d+=m(),h="hexadecimalInteger";return}throw k(m())},hexadecimalInteger(){if(C.isHexDigit(F)){d+=m();return}return y("numeric",p*Number(d))},string(){switch(F){case"\\":m(),d+=function(){switch(g()){case"b":return m(),"\b";case"f":return m(),"\f";case"n":return m(),"\n";case"r":return m(),"\r";case"t":return m(),"	";case"v":return m(),"\v";case"0":if(m(),C.isDigit(g()))throw k(m());return"\0";case"x":return m(),function(){let e="",t=g();if(!C.isHexDigit(t)||(e+=m(),t=g(),!C.isHexDigit(t)))throw k(m());return String.fromCodePoint(parseInt(e+=m(),16))}();case"u":return m(),w();case"\n":case"\u2028":case"\u2029":return m(),"";case"\r":return m(),"\n"===g()&&m(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw k(m())}return m()}();return;case'"':if(f)return m(),y("string",d);d+=m();return;case"'":if(!f)return m(),y("string",d);d+=m();return;case"\n":case"\r":case void 0:throw k(m());case"\u2028":case"\u2029":var e;e=F,console.warn(`JSON5: '${R(e)}' in strings is not valid ECMAScript; consider escaping`)}d+=m()},start(){switch(F){case"{":case"[":return y("punctuator",m())}h="value"},beforePropertyName(){switch(F){case"$":case"_":d=m(),h="identifierName";return;case"\\":m(),h="identifierNameStartEscape";return;case"}":return y("punctuator",m());case'"':case"'":f='"'===m(),h="string";return}if(C.isIdStartChar(F)){d+=m(),h="identifierName";return}throw k(m())},afterPropertyName(){if(":"===F)return y("punctuator",m());throw k(m())},beforePropertyValue(){h="value"},afterPropertyValue(){switch(F){case",":case"}":return y("punctuator",m())}throw k(m())},beforeArrayValue(){if("]"===F)return y("punctuator",m());h="value"},afterArrayValue(){switch(F){case",":case"]":return y("punctuator",m())}throw k(m())},end(){throw k(m())}};function y(e,t){return{type:e,value:t,line:a,column:o}}function b(e){for(let t of e){if(g()!==t)throw k(m());m()}}function w(){let e="",t=4;for(;t-- >0;){let t=g();if(!C.isHexDigit(t))throw k(m());e+=m()}return String.fromCodePoint(parseInt(e,16))}let B={start(){if("eof"===l.type)throw S();_()},beforePropertyName(){switch(l.type){case"identifier":case"string":D=l.value,s="afterPropertyName";return;case"punctuator":v();return;case"eof":throw S()}},afterPropertyName(){if("eof"===l.type)throw S();s="beforePropertyValue"},beforePropertyValue(){if("eof"===l.type)throw S();_()},beforeArrayValue(){if("eof"===l.type)throw S();if("punctuator"===l.type&&"]"===l.value){v();return}_()},afterPropertyValue(){if("eof"===l.type)throw S();switch(l.value){case",":s="beforePropertyName";return;case"}":v()}},afterArrayValue(){if("eof"===l.type)throw S();switch(l.value){case",":s="beforeArrayValue";return;case"]":v()}},end(){}};function _(){let e;switch(l.type){case"punctuator":switch(l.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=l.value}if(void 0===c)c=e;else{let t=n[n.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,D,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(null!==e&&"object"==typeof e)n.push(e),s=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{let e=n[n.length-1];s=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}}function v(){n.pop();let e=n[n.length-1];s=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function k(e){return void 0===e?P(`JSON5: invalid end of input at ${a}:${o}`):P(`JSON5: invalid character '${R(e)}' at ${a}:${o}`)}function S(){return P(`JSON5: invalid end of input at ${a}:${o}`)}function x(){return o-=5,P(`JSON5: invalid identifier character at ${a}:${o}`)}function R(e){let t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){let t=e.charCodeAt(0).toString(16);return"\\x"+("00"+t).substring(t.length)}return e}function P(e){let t=SyntaxError(e);return t.lineNumber=a,t.columnNumber=o,t}let M={parse:function(e,t){r=String(e),s="start",n=[],i=0,a=1,o=0,l=void 0,D=void 0,c=void 0;do l=function(){for(h="default",d="",f=!1,p=1;;){F=g();let e=E[h]();if(e)return e}}(),B[s]();while("eof"!==l.type);return"function"==typeof t?function e(t,u,r){let s=t[u];if(null!=s&&"object"==typeof s){if(Array.isArray(s))for(let t=0;t<s.length;t++){let u=String(t),n=e(s,u,r);void 0===n?delete s[u]:Object.defineProperty(s,u,{value:n,writable:!0,enumerable:!0,configurable:!0})}else for(let t in s){let u=e(s,t,r);void 0===u?delete s[t]:Object.defineProperty(s,t,{value:u,writable:!0,enumerable:!0,configurable:!0})}}return r.call(t,u,s)}({"":c},"",t):c},stringify:function(e,t,u){let r,s,n;let i=[],a="",o="";if(null==t||"object"!=typeof t||Array.isArray(t)||(u=t.space,n=t.quote,t=t.replacer),"function"==typeof t)s=t;else if(Array.isArray(t))for(let e of(r=[],t)){let t;"string"==typeof e?t=e:("number"==typeof e||e instanceof String||e instanceof Number)&&(t=String(e)),void 0!==t&&0>r.indexOf(t)&&r.push(t)}return u instanceof Number?u=Number(u):u instanceof String&&(u=String(u)),"number"==typeof u?u>0&&(u=Math.min(10,Math.floor(u)),o="          ".substr(0,u)):"string"==typeof u&&(o=u.substr(0,10)),function e(t,u){let n=u[t];switch(null!=n&&("function"==typeof n.toJSON5?n=n.toJSON5(t):"function"==typeof n.toJSON&&(n=n.toJSON(t))),s&&(n=s.call(u,t,n)),n instanceof Number?n=Number(n):n instanceof String?n=String(n):n instanceof Boolean&&(n=n.valueOf()),n){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof n?l(n,!1):"number"==typeof n?String(n):"object"==typeof n?Array.isArray(n)?function(t){let u;if(i.indexOf(t)>=0)throw TypeError("Converting circular structure to JSON5");i.push(t);let r=a;a+=o;let s=[];for(let u=0;u<t.length;u++){let r=e(String(u),t);s.push(void 0!==r?r:"null")}if(0===s.length)u="[]";else if(""===o)u="["+s.join(",")+"]";else{let e=",\n"+a,t=s.join(e);u="[\n"+a+t+",\n"+r+"]"}return i.pop(),a=r,u}(n):function(t){let u;if(i.indexOf(t)>=0)throw TypeError("Converting circular structure to JSON5");i.push(t);let s=a;a+=o;let n=r||Object.keys(t),D=[];for(let u of n){let r=e(u,t);if(void 0!==r){let e=function(e){if(0===e.length)return l(e,!0);let t=String.fromCodePoint(e.codePointAt(0));if(!C.isIdStartChar(t))return l(e,!0);for(let u=t.length;u<e.length;u++)if(!C.isIdContinueChar(String.fromCodePoint(e.codePointAt(u))))return l(e,!0);return e}(u)+":";""!==o&&(e+=" "),e+=r,D.push(e)}}if(0===D.length)u="{}";else{let e;if(""===o)u="{"+(e=D.join(","))+"}";else{let t=",\n"+a;e=D.join(t),u="{\n"+a+e+",\n"+s+"}"}}return i.pop(),a=s,u}(n):void 0}("",{"":e});function l(e){let t={"'":.1,'"':.2},u={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},r="";for(let s=0;s<e.length;s++){let n=e[s];switch(n){case"'":case'"':t[n]++,r+=n;continue;case"\0":if(C.isDigit(e[s+1])){r+="\\x00";continue}}if(u[n]){r+=u[n];continue}if(n<" "){let e=n.charCodeAt(0).toString(16);r+="\\x"+("00"+e).substring(e.length);continue}r+=n}let s=n||Object.keys(t).reduce((e,u)=>t[e]<t[u]?e:u);return r=r.replace(RegExp(s,"g"),u[s]),s+r+s}}}}};