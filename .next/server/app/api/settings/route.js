"use strict";(()=>{var t={};t.id=668,t.ids=[668],t.modules={399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5900:t=>{t.exports=require("pg")},7812:(t,e,s)=>{s.r(e),s.d(e,{originalPathname:()=>l,patchFetch:()=>x,requestAsyncStorage:()=>g,routeModule:()=>c,serverHooks:()=>y,staticGenerationAsyncStorage:()=>d});var r={};s.r(r),s.d(r,{GET:()=>u,POST:()=>m});var n=s(9303),o=s(8716),a=s(670),i=s(7070),p=s(9487);async function u(){try{let t=await p.db.getSetting("gemini_api_key"),e=await p.db.getSetting("summary_prompt"),s=await p.db.getSetting("taxonomy_system_prompt"),r=await p.db.getSetting("taxonomy_format_prompt");return i.NextResponse.json({success:!0,data:{geminiApiKey:t||"",summaryPrompt:e||"Создай краткое саммари следующей статьи. Выдели основные моменты и ключевые идеи. Ответ должен быть на русском языке, лаконичным и информативным (3-5 предложений).",taxonomySystemPrompt:s||"Ты — редактор аналитического портала. Определи страну, город, темы и теги статьи так, чтобы они помогали редакции быстро рубрицировать материалы.",taxonomyFormatPrompt:r||'Верни ответ строго в формате JSON:\n{\n  "summary": "краткое резюме на русском",\n  "taxonomy": {\n    "country": "Название страны или null",\n    "city": "Название города или null",\n    "themes": ["Список тем"],\n    "tags": ["Список тегов"]\n  }\n}\nНе добавляй пояснений. Если не удалось определить значение, используй null или пустой массив.'}})}catch(t){return console.error("Error fetching settings:",t),i.NextResponse.json({success:!1,error:"Failed to fetch settings"},{status:500})}}async function m(t){try{let{geminiApiKey:e,summaryPrompt:s,taxonomySystemPrompt:r,taxonomyFormatPrompt:n}=await t.json();if(!e)return i.NextResponse.json({success:!1,error:"API ключ обязателен"},{status:400});return await p.db.setSetting("gemini_api_key",e),s&&await p.db.setSetting("summary_prompt",s),r&&await p.db.setSetting("taxonomy_system_prompt",r),n&&await p.db.setSetting("taxonomy_format_prompt",n),i.NextResponse.json({success:!0,message:"Settings saved successfully"})}catch(t){return console.error("Error saving settings:",t),i.NextResponse.json({success:!1,error:"Failed to save settings"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/settings/route",pathname:"/api/settings",filename:"route",bundlePath:"app/api/settings/route"},resolvedPagePath:"/Users/macbookpro/Desktop/syndicateadmin/app/api/settings/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:g,staticGenerationAsyncStorage:d,serverHooks:y}=c,l="/api/settings/route";function x(){return(0,a.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:d})}}};var e=require("../../../webpack-runtime.js");e.C(t);var s=t=>e(e.s=t),r=e.X(0,[948,972,487],()=>s(7812));module.exports=r})();