"use strict";(()=>{var e={};e.id=90,e.ids=[90],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5900:e=>{e.exports=require("pg")},1359:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>y,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>x,staticGenerationAsyncStorage:()=>c});var a={};t.r(a),t.d(a,{POST:()=>d,dynamic:()=>p});var o=t(9303),s=t(8716),n=t(670),i=t(7070),u=t(9487);let p="force-dynamic";async function d(e){try{let{materialId:r,categoryIds:t,themeIds:a,tagIds:o,allianceIds:s,countryId:n,cityId:p}=await e.json();if(!r)return i.NextResponse.json({success:!1,error:"Не указан материал"},{status:400});let d=(e,r)=>{if(Array.isArray(e))return e.map(e=>{let t=Number(e);if(Number.isNaN(t))throw Error(`Некорректный идентификатор в списке ${r}`);return t})},l=(e,r)=>{if(void 0===e)return;if(null===e||""===e)return null;let t=Number(e);if(Number.isNaN(t))throw Error(`Некорректный идентификатор для ${r}`);return t},m={categoryIds:d(t,"категорий"),themeIds:d(a,"тем"),tagIds:d(o,"тегов"),allianceIds:d(s,"политических союзов"),countryId:l(n,"страны"),cityId:l(p,"города")};await u.db.updateMaterialTaxonomy(r,m);let c=await u.db.getMaterialById(r);return i.NextResponse.json({success:!0,data:c})}catch(r){console.error("Error updating material taxonomy:",r);let e=r instanceof Error?r.message:"Не удалось обновить таксономию материала";return i.NextResponse.json({success:!1,error:e},{status:400})}}let l=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/materials/taxonomy/route",pathname:"/api/materials/taxonomy",filename:"route",bundlePath:"app/api/materials/taxonomy/route"},resolvedPagePath:"/Users/macbookpro/Desktop/syndicateadmin/app/api/materials/taxonomy/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:c,serverHooks:x}=l,y="/api/materials/taxonomy/route";function f(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:c})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[948,972,487],()=>t(1359));module.exports=a})();