(()=>{var e={};e.id=757,e.ids=[757],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5900:e=>{"use strict";e.exports=require("pg")},9261:e=>{"use strict";e.exports=require("postcss")},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},4099:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>l}),r(377),r(596),r(7489),r(5866);var s=r(3191),a=r(8716),n=r(7922),i=r.n(n),o=r(5231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let l=["",{children:["admin",{children:["logs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,377)),"/Users/macbookpro/Desktop/syndicateadmin/app/admin/logs/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,596)),"/Users/macbookpro/Desktop/syndicateadmin/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,7489)),"/Users/macbookpro/Desktop/syndicateadmin/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/macbookpro/Desktop/syndicateadmin/app/admin/logs/page.tsx"],u="/admin/logs/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/logs/page",pathname:"/admin/logs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},4019:(e,t,r)=>{Promise.resolve().then(r.bind(r,3289))},8287:(e,t,r)=>{Promise.resolve().then(r.bind(r,2346))},6421:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},5303:()=>{},3289:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(326),a=r(7577),n=r(3796),i=r(2643),o=r(5940),d=r(772),l=r(567),c=r(5304),u=r(5999),m=r(4674),x=r(770),p=r(9492);let f=(0,r(7926).Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),g=e=>new Date(e).toLocaleString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),h=e=>"number"==typeof e&&Number.isFinite(e)?`${Math.round(100*e)}%`:"—",b=e=>e.validationCategory&&e.predictedCategory?e.validationCategory===e.predictedCategory?{label:"Подтверждено",variant:"default",icon:s.jsx(m.Z,{className:"h-3.5 w-3.5"})}:{label:"Изменено при проверке",variant:"warning",icon:s.jsx(x.Z,{className:"h-3.5 w-3.5"})}:e.predictedCategory?{label:"Сохранено",variant:"secondary",icon:s.jsx(m.Z,{className:"h-3.5 w-3.5"})}:{label:"Ошибка",variant:"destructive",icon:s.jsx(x.Z,{className:"h-3.5 w-3.5"})},y={default:"bg-primary/10 text-primary border-transparent",secondary:"bg-muted text-foreground border-transparent",warning:"bg-amber-100 text-amber-900 border-transparent dark:bg-amber-400/10 dark:text-amber-300",destructive:"bg-destructive/10 text-destructive border-transparent"};function v(){let[e,t]=(0,a.useState)([]),[r,m]=(0,a.useState)(!0),[x,v]=(0,a.useState)(null),j=(0,a.useCallback)(async()=>{try{m(!0),v(null);let e=await fetch("/api/categorization-logs?limit=100",{cache:"no-store"}),r=await e.json();if(!e.ok||!r.success)throw Error(r.error||"Не удалось загрузить логи");t(r.data??[])}catch(t){let e=t instanceof Error?t.message:"Неожиданная ошибка";v(e),u.Am.error(e)}finally{m(!1)}},[]),N=e.length>0;return(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.P,{}),s.jsx("div",{className:"min-h-screen bg-background p-8",children:(0,s.jsxs)("div",{className:"container space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Логи классификации"}),s.jsx("p",{className:"text-muted-foreground max-w-2xl",children:"История решений нейросети по присвоению категорий с пошаговым reasoning и результатами перепроверки."})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[s.jsx(i.ll,{children:"Последние операции"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[r?(0,s.jsxs)("span",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(p.Z,{className:"h-4 w-4 animate-spin"}),"Обновление..."]}):null,(0,s.jsxs)(d.z,{variant:"outline",size:"sm",onClick:j,disabled:r,children:[s.jsx(f,{className:"mr-2 h-4 w-4"}),"Обновить"]})]})]}),(0,s.jsxs)(i.aY,{children:[x&&s.jsx("div",{className:"mb-4 rounded-md border border-destructive/40 bg-destructive/5 p-3 text-sm text-destructive",children:x}),r&&!N?s.jsx("div",{className:"space-y-2",children:Array.from({length:6}).map((e,t)=>s.jsx(c.O,{className:"h-12 w-full"},t))}):N?s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)(o.iA,{children:[s.jsx(o.xD,{children:(0,s.jsxs)(o.SC,{children:[s.jsx(o.ss,{className:"w-48",children:"Дата"}),s.jsx(o.ss,{children:"Материал"}),s.jsx(o.ss,{className:"w-40",children:"Категория"}),s.jsx(o.ss,{className:"w-40",children:"Перепроверка"}),s.jsx(o.ss,{className:"w-32 text-center",children:"Уверенность"}),s.jsx(o.ss,{className:"w-32 text-center",children:"Статус"}),s.jsx(o.ss,{className:"w-[320px]",children:"Reasoning"})]})}),s.jsx(o.RM,{children:e.map(e=>{let t=b(e),r=e.metadata?.final_category;return(0,s.jsxs)(o.SC,{children:[s.jsx(o.pj,{className:"align-top text-sm text-muted-foreground",children:g(e.createdAt)}),(0,s.jsxs)(o.pj,{className:"align-top",children:[s.jsx("div",{className:"text-sm font-medium text-foreground break-words",children:e.title||"—"}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground break-words",children:["ID: ",e.materialId]}),e.supercategory&&(0,s.jsxs)("div",{className:"mt-1 text-xs text-muted-foreground",children:["Надкатегория: ",e.supercategory]})]}),(0,s.jsxs)(o.pj,{className:"align-top text-sm",children:[e.predictedCategory||"—",r&&r!==e.predictedCategory&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Итоговая: ",r]})]}),(0,s.jsxs)(o.pj,{className:"align-top text-sm",children:[e.validationCategory||"—",null!==e.validationConfidence&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Доверие: ",h(e.validationConfidence)]})]}),s.jsx(o.pj,{className:"align-top text-sm text-center",children:h(e.confidence)}),s.jsx(o.pj,{className:"align-top text-center",children:(0,s.jsxs)(l.C,{variant:"outline",className:y[t.variant]??y.default,children:[s.jsx("span",{className:"mr-1 inline-flex items-center gap-1",children:t.icon}),t.label]})}),s.jsx(o.pj,{className:"align-top text-xs text-muted-foreground",children:e.reasoning?(0,s.jsxs)("details",{className:"space-y-1",children:[s.jsx("summary",{className:"cursor-pointer text-primary",children:"Показать шаги"}),s.jsx("pre",{className:"mt-2 whitespace-pre-wrap rounded-md bg-muted/40 p-3 text-[11px] text-foreground",children:JSON.stringify(e.reasoning,null,2)})]}):s.jsx("span",{children:"—"})})]},e.id)})})]})}):s.jsx("div",{className:"py-16 text-center text-sm text-muted-foreground",children:"Пока нет записей. Запустите генерацию или регенерацию таксономии, чтобы увидеть Reasoning."})]})]})]})})]})}},3796:(e,t,r)=>{"use strict";r.d(t,{P:()=>c});var s=r(326),a=r(434),n=r(5047),i=r(7863),o=r(772),d=r(6125),l=r(5999);function c(){let e=(0,n.usePathname)(),t=(0,n.useRouter)(),r=async()=>{try{(await fetch("/api/admin/logout",{method:"POST"})).ok&&(l.Am.success("Вы вышли из системы"),t.push("/admin/login"),t.refresh())}catch(e){console.error("Logout error:",e),l.Am.error("Ошибка при выходе")}};return s.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,s.jsxs)("div",{className:"container flex h-16 items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-6 md:gap-10",children:[s.jsx(a.default,{href:"/admin",className:"flex items-center space-x-2",children:(0,s.jsxs)("span",{className:"text-xl font-bold tracking-tight",children:["SYNDICATE ",s.jsx("span",{className:"text-primary",children:"admin"})]})}),s.jsx("nav",{className:"flex items-center gap-6",children:[{href:"/admin",label:"Дашборд"},{href:"/admin/materials",label:"Материалы"},{href:"/admin/rss",label:"RSS фиды"},{href:"/admin/taxonomy",label:"Справочники"},{href:"/admin/logs",label:"Логи AI"},{href:"/admin/settings",label:"Настройки"}].map(t=>s.jsx(a.default,{href:t.href,className:(0,i.cn)("text-sm font-medium transition-colors hover:text-primary",e===t.href?"text-foreground":"text-muted-foreground"),children:t.label},t.href))})]}),(0,s.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:r,children:[s.jsx(d.Z,{className:"mr-2 h-4 w-4"}),"Выход"]})]})})}},567:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var s=r(326);r(7577);var a=r(9360),n=r(7863);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return s.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...r})}},772:(e,t,r)=>{"use strict";r.d(t,{d:()=>d,z:()=>l});var s=r(326),a=r(7577),n=r(4214),i=r(9360),o=r(7863);let d=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...i},l)=>{let c=a?n.g7:"button";return s.jsx(c,{className:(0,o.cn)(d({variant:t,size:r,className:e})),ref:l,...i})});l.displayName="Button"},2643:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>o,SZ:()=>l,Zb:()=>i,aY:()=>c,ll:()=>d});var s=r(326),a=r(7577),n=r(7863);let i=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));l.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},5304:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});var s=r(326),a=r(7863);function n({className:e,...t}){return s.jsx("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...t})}},2346:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>n});var s=r(326),a=r(5999);let n=({...e})=>s.jsx(a.x7,{theme:"system",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},5940:(e,t,r)=>{"use strict";r.d(t,{RM:()=>d,SC:()=>l,iA:()=>i,pj:()=>u,ss:()=>c,xD:()=>o});var s=r(326),a=r(7577),n=r(7863);let i=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:(0,n.cn)("[&_tr]:border-b",e),...t}));o.displayName="TableHeader";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));d.displayName="TableBody",a.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));l.displayName="TableRow";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let u=a.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},7863:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(1135),a=r(1009);function n(...e){return(0,a.m6)((0,s.W)(e))}},5047:(e,t,r)=>{"use strict";var s=r(7389);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},596:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>a});var s=r(9510);let a={title:"Syndicate Admin - Панель управления",description:"Административная панель для управления RSS-фидами, материалами и настройками сервиса Syndicate."};function n({children:e}){return s.jsx(s.Fragment,{children:e})}},377:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var s=r(8570);let a=(0,s.createProxy)(String.raw`/Users/macbookpro/Desktop/syndicateadmin/app/admin/logs/page.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let o=(0,s.createProxy)(String.raw`/Users/macbookpro/Desktop/syndicateadmin/app/admin/logs/page.tsx#default`)},7489:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m,metadata:()=>u});var s=r(9510),a=r(5384),n=r.n(a);r(7272);var i=r(8570);let o=(0,i.createProxy)(String.raw`/Users/macbookpro/Desktop/syndicateadmin/components/ui/sonner.tsx`),{__esModule:d,$$typeof:l}=o;o.default;let c=(0,i.createProxy)(String.raw`/Users/macbookpro/Desktop/syndicateadmin/components/ui/sonner.tsx#Toaster`),u={title:"Syndicate - Материалы из различных источников",description:"Коллекция публикаций и материалов из различных RSS-источников. Удобный просмотр и фильтрация контента."};function m({children:e}){return s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{className:n().className,children:[e,s.jsx(c,{position:"top-right"})]})})}Promise.all([r.e(27),r.e(258),r.e(487),r.e(424)]).then(r.bind(r,7328)).then(({initCronJob:e,runInitialFetch:t})=>{e(),t()})},7272:()=>{},770:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(7926).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},4674:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(7926).Z)("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},9492:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(7926).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6125:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(7926).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,283,896,434],()=>r(4099));module.exports=s})();